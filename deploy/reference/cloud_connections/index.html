<html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="color-scheme" content="light dark"><title>云连接 - Deno 中文文档</title><meta name="description" content="了解如何将 Deno Deploy 连接到 AWS 和 Google Cloud Platform 等云提供商，而无需管理凭据。"><link rel="icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><script>const theme = localStorage.getItem('denoDocsTheme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'); document.documentElement.classList.add(theme);</script><link rel="stylesheet" href="/style.css"><link rel="preload" href="/fonts/inter/Inter-Regular.woff2" as="font" type="font/woff2" crossOrigin="anonymous"><link rel="preload" href="/fonts/inter/Inter-SemiBold.woff2" as="font" type="font/woff2" crossOrigin="anonymous"><link rel="me" href="https://fosstodon.org/@deno_land"><meta name="twitter:title" content="云连接"><meta name="twitter:description" content="了解如何将 Deno Deploy 连接到 AWS 和 Google Cloud Platform 等云提供商，而无需管理凭据。"><meta name="twitter:image" content="https://docs.deno.com/deploy/reference/cloud_connections/index.png"><meta name="twitter:image:alt" content="了解如何将 Deno Deploy 连接到 AWS 和 Google Cloud Platform 等云提供商，而无需管理凭据。"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@deno_land"><meta property="og:title" content="云连接"><meta property="og:description" content="了解如何将 Deno Deploy 连接到 AWS 和 Google Cloud Platform 等云提供商，而无需管理凭据。"><meta property="og:image" content="https://docs.deno.com/deploy/reference/cloud_connections/index.png"><meta property="og:image:alt" content="了解如何将 Deno Deploy 连接到 AWS 和 Google Cloud Platform 等云提供商，而无需管理凭据。"><meta property="og:type" content="article"><meta property="og:site_name" content="Deno"><meta property="og:locale" content="en_US"><meta name="keywords" content="Deno, JavaScript, TypeScript, reference, documentation, guide, tutorial, example"><script type="module" defer src="/script.js"></script><script type="module" defer src="/js/main.js"></script><script type="module" defer src="/js/lint_rules.js"></script><script type="module" defer src="/js/copy.js"></script><script type="module" defer src="/js/tabs.js"></script><script type="module" defer src="/js/feedback.js"></script><script type="module" defer src="/js/search.js"></script><script async src="https://www.zhcndoc.com/js/common.js"></script><link rel="preconnect" href="https://www.googletagmanager.com"></head><body data-services-page><a href="#content" class="opacity-0 p-2 px-4 bg-background-secondary transition-transform duration-150 rounded-md ease-out absolute top-2 left-2 -translate-y-full focus:opacity-100 focus:translate-y-0 z-[500]">Skip to main content</a><header class="w-full h-auto sticky top-0 z-[100] bg-background-raw "><div class="grid grid-cols-[auto_1fr] md:grid-cols-[auto_auto_1fr] h-[var(--header-height)] gap-x-4 items-center justify-between px-4 w-full max-w-7xl mx-auto xlplus:px-0"><a href="https://deno.com" title="Deno main website" class="block h-8 w-8 xs:w-auto md:h-10 md:mr-auto overflow-hidden"><svg width="100%" height="100%" viewBox="0 0 1025 331" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" class="" data-component="logo"><path id="background" d="M28.829,227.937c-8.871,-19.143 -13.822,-40.465 -13.822,-62.935c-0,-5.815 0.332,-11.554 0.977,-17.197c0.655,-5.703 1.626,-11.299 2.893,-16.773c7.12,-30.704 23.68,-57.808 46.452,-78.082c19.127,-17.006 42.558,-29.14 68.244,-34.64c10.137,-2.165 20.651,-3.304 31.43,-3.304c3.778,0.004 7.583,0.149 11.411,0.441c18.154,1.386 35.309,5.956 50.959,13.121c12.625,5.786 24.31,13.274 34.762,22.169c26.253,22.364 44.562,53.517 50.651,88.476c1.455,8.379 2.213,16.996 2.213,25.789c-0.003,3.784 -0.149,7.595 -0.442,11.429c-1.106,14.489 -4.241,28.342 -9.104,41.302c-6.788,18.051 -16.959,34.452 -29.738,48.428c-16.621,16.971 -37.743,24.523 -55.384,24.209c-12.828,-0.229 -25.379,-5.333 -34.052,-12.801c-12.39,-10.669 -17.394,-22.865 -19.11,-36.474c-0.426,-3.383 -0.176,-12.601 1.585,-18.984c1.312,-4.758 4.64,-13.946 9.507,-17.965c-5.693,-2.452 -13.021,-7.792 -15.331,-10.355c-0.568,-0.63 -0.494,-1.617 0.014,-2.296c0.509,-0.678 1.4,-0.946 2.199,-0.659c4.895,1.68 10.856,3.337 17.142,4.389c8.267,1.382 18.548,3.122 28.963,3.634c25.395,1.247 51.921,-10.151 60.154,-32.83c8.232,-22.679 5.038,-45.111 -24.496,-58.566c-29.535,-13.456 -43.178,-29.455 -67.041,-39.104c-15.587,-6.303 -32.935,-2.561 -50.746,7.282c-47.974,26.512 -90.955,110.279 -71.142,187.887c0.283,1.062 -0.195,2.18 -1.158,2.709c-0.903,0.495 -2.013,0.354 -2.761,-0.331c-5.766,-6.336 -10.998,-13.166 -15.623,-20.421c-3.578,-5.614 -6.79,-11.475 -9.606,-17.548Z" style="fill: var(--logoColor);"></path><path id="outline" d="M172.67,0.181c90.968,4.232 161.386,81.521 157.155,172.489c-4.232,90.968 -81.522,161.385 -172.489,157.153c-90.968,-4.231 -161.386,-81.52 -157.155,-172.487c4.232,-90.968 81.521,-161.386 172.489,-157.155Zm38.578,198.678c-10.415,-0.512 -20.696,-2.252 -28.963,-3.634c-6.286,-1.052 -12.247,-2.709 -17.142,-4.389c-0.799,-0.287 -1.69,-0.019 -2.199,0.659c-0.508,0.679 -0.582,1.666 -0.014,2.296c2.31,2.563 9.638,7.903 15.331,10.355c-4.867,4.019 -8.195,13.207 -9.507,17.965c-1.761,6.383 -2.011,15.601 -1.585,18.984c1.716,13.609 6.72,25.805 19.11,36.474c8.673,7.468 21.224,12.572 34.052,12.801c17.702,0.315 38.909,-7.29 55.556,-24.385c21.765,-23.861 36.023,-54.887 38.67,-89.554c6.303,-82.546 -55.596,-154.681 -138.143,-160.984c-82.545,-6.303 -154.68,55.597 -160.983,138.143c-3.264,42.749 11.764,82.706 38.481,112.17c0.744,0.809 1.944,1.006 2.907,0.477c0.963,-0.529 1.441,-1.647 1.158,-2.709c-19.813,-77.608 23.168,-161.375 71.142,-187.887c17.811,-9.843 35.159,-13.585 50.746,-7.282c23.863,9.649 37.506,25.648 67.041,39.104c29.534,13.455 32.728,35.887 24.496,58.566c-8.233,22.679 -34.759,34.077 -60.154,32.83Z" style="fill: var(--outlineColor);"></path><path id="logotype" d="M694.596,164.68c-0,4.838 -0,11.794 -0.909,14.213l-103.727,0c4.837,17.542 18.749,28.431 37.8,28.431c15.728,0.302 27.219,-6.654 35.383,-16.636l25.705,23.894c-12.7,16.028 -34.171,27.822 -63.809,27.822c-43.243,-0 -75.904,-30.242 -75.904,-76.513c-0,-44.756 31.148,-75.907 73.184,-75.907c43.243,-0 72.277,31.453 72.277,74.696Zm-71.07,-39.918c-16.025,-0 -28.729,8.771 -33.265,25.706l65.02,-0c-3.932,-15.422 -14.515,-25.706 -31.755,-25.706Zm175.096,-34.778c31.758,-0 53.829,16.938 53.829,62.298l0,87.703l-39.615,-0l0,-77.724c0,-28.124 -9.976,-36.892 -28.427,-36.892c-19.953,0 -33.564,13.908 -33.564,40.221l-0,74.395l-39.617,-0l0,-147.582l39.617,-0l-0,19.055l0.602,0c12.095,-14.213 29.037,-21.474 47.175,-21.474Zm146.977,152.42c-46.871,-0 -78.324,-32.058 -78.324,-76.21c-0,-44.153 31.453,-76.21 78.324,-76.21c45.971,-0 78.628,30.849 78.628,76.21c0,45.36 -32.657,76.21 -78.628,76.21Zm-0,-35.386c21.469,0 38.411,-16.934 38.411,-40.824c-0,-24.192 -16.332,-40.825 -38.411,-40.825c-22.986,0 -38.404,17.539 -38.404,40.825c0,22.984 16.028,40.824 38.404,40.824Zm-540.473,32.967l0,-150.001l54.227,-0c47.449,-0 77.952,30.845 77.952,75.212c-0,44.154 -28.597,74.789 -77.316,74.789l-54.863,-0Zm38.976,-35.705l13.133,-0c22.878,-0 37.917,-17.535 37.917,-39.084c-0,-22.395 -15.251,-39.507 -34.952,-39.507l-16.098,-0l0,78.591Z" style="fill: var(--textColor);"></path><path id="eye" d="M159.634,78.772c8.092,-0.634 15.152,6.272 16.369,15.457c1.624,12.235 -2.867,24.874 -17.633,25.165c-12.614,0.252 -16.436,-12.469 -15.6,-20.175c0.83,-7.706 7.182,-19.687 16.864,-20.447Z" style="fill: var(--eyeColor);"></path><style>
        [data-component="logo"] {
          --logoColor: #000;
          --textColor: #000;
          --eyeColor: #000;
          --outlineColor: transparent;

          height: 100%;
          width: auto;
        }
        .dark [data-component="logo"] {
          --textColor: #fff;
          --outlineColor: #fff;
        }
        @keyframes blink {
          0%, 100% {
            transform: scaleY(1);
          }
          50% {
            transform: scaleY(0.15);
          }
        }
        [data-component="logo"]:hover,
        a:focus [data-component="logo"] {
          #eye {
            transform-origin: 50% 30%;
            animation: blink 0.15s cubic-bezier(0.5, 0, 0.5, 1);
          }
        }
        </style></svg></a><nav id="main-nav" class="flex h-full items-center row-start-2 col-span-2 md:row-auto md:col-auto -mx-4 md:mx-0 overflow-x-auto md:overflow-clip"><a href="/runtime/" class="font-[clamp(0.8rem,1.5vw,1rem)] whitespace-nowrap relative py-0 px-4 h-full flex justify-center items-center text-foreground-primary hover:text-gray-800 transition-colors duration-200  ">文档</a><a href="/api/deno/" class="font-[clamp(0.8rem,1.5vw,1rem)] whitespace-nowrap relative py-0 px-4 h-full flex justify-center items-center text-foreground-primary hover:text-gray-800 transition-colors duration-200  ">API 参考</a><a href="/examples/" class="font-[clamp(0.8rem,1.5vw,1rem)] whitespace-nowrap relative py-0 px-4 h-full flex justify-center items-center text-foreground-primary hover:text-gray-800 transition-colors duration-200  ">示例</a><a href="/services/" class="font-[clamp(0.8rem,1.5vw,1rem)] whitespace-nowrap relative py-0 px-4 h-full flex justify-center items-center text-foreground-primary hover:text-gray-800 transition-colors duration-200 font-bold text-gray-800 bg-header-highlight services" data-active aria-current="location"><div id="current-nav-item" class="absolute inset-0 bg-header-highlight -z-10 transition-transform duration-200 easing-[cubic-bezier(0.5,0,0.5,1)] origin-left" style="--left: 0px; --scaleX: 1; transform: translateX(var(--left)) scaleX(var(--scaleX));"></div>服务</a></nav><div class="flex items-center gap-x-2 sm:gap-x-4 ml-auto w-full max-w-80"><div class="md:relative w-full"><div class="relative"><input type="search" placeholder="Search" id="orama-search-input" class="w-full min-w-24 rounded-lg placeholder:text-sm text-base leading-normal p-1 pl-8 border transition-all duration-150 text-foreground-primary border-foreground-secondary hover:bg-background-secondary focus:bg-background-secondary focus:outline-offset-1" style="background: url(/img/search.svg) no-repeat 0.5em 50%; background-size: 1.25em; background-color: var(--color-background-raw);"><kbd id="search-key" class="hidden xs:flex pointer-events-none absolute font-sans rounded-sm top-1 right-1 bottom-1 w-auto border-1 border-foreground-tertiary border-b-2 border-r-2 bg-background-primary text-foreground-secondary text-center text-xs font-bold p-2 items-center justify-center dark:bg-background-secondary dark:border-gray-700">⌘K</kbd><div id="orama-search-loading" class="absolute left-2 top-1/2 transform -translate-y-1/2 hidden bg-background-raw"><div class="animate-spin rounded-full h-4 w-4 border-2 border-transparent border-r-foreground-primary bg-background-raw"></div></div><div class="sr-only" aria-live="polite" id="orama-results-announcer"></div></div><div id="orama-search-results" class="absolute inset-2 left-2 right-2 h-[calc(100vh-8rem)] top-10 md:top-full md:left-auto md:right-0 mt-2 bg-background-raw border border-foreground-tertiary rounded-xl shadow-2xl z-50 md:max-h-128 overflow-hidden hidden md:min-w-160 max-w-2xl"><div id="orama-search-results-content" class="overflow-y-auto h-full"></div><div class="border-t border-foreground-tertiary bg-background-secondary px-4 py-2 sticky bottom-0"><div class="flex items-center gap-6 text-xs text-foreground-secondary"><span><kbd class="px-1.5 py-0.5 text-xs font-semibold text-foreground-secondary bg-background-primary border-r-2 border-b-2 border border-foreground-tertiary rounded mr-1"><span aria-hidden="true">↑↓</span><span class="sr-only">Up or down to</span></kbd>navigate</span><span><kbd class="px-1.5 py-0.5 text-xs font-semibold text-foreground-secondary bg-background-primary border-r-2 border-b-2 border border-foreground-tertiary rounded mr-1"><span aria-hidden="true">↵</span><span class="sr-only">Enter to</span></kbd>select</span><span><kbd class="px-1.5 py-0.5 text-xs font-semibold text-foreground-secondary bg-background-primary border-r-2 border-b-2 border border-foreground-tertiary rounded mr-1"><span aria-hidden="true">ESC</span><span class="sr-only">Escape to</span></kbd>close</span></div></div></div></div><button type="button" aria-label="toggle theme" class="shrink-0 h-9 aspect-square p-1 cursor-pointer rounded border border-transparent transition-colors duration-200 ease-in-out text-foreground-secondary hover:decoration-none hover:bg-background-secondary hover:border-background-tertiary flex flex-col items-center justify-start overflow-hidden" id="theme-toggle"><img src="/img/light.svg" class="w-full block -translate-y-full dark:translate-y-0 transition-transform duration-200 easing-[0.86,0,0.07,1]" alt=""><img src="/img/dark.svg" class="w-full block -translate-y-full dark:translate-y-0 transition-transform duration-200 easing-[0.86,0,0.07,1]" alt=""><span class="sr-only">Toggle Theme</span></button><button type="button" id="hamburger-button" class="h-8 w-auto py-2 px-0 flex flex-col justify-between rounded md:hidden" aria-pressed="false"><div class="block w-6 h-0.5 bg-foreground-primary duration-200 ease-[cubic-bezier(0.77,0,0.175,1)] transition-transform hamburger-bar--top"></div><div class="block w-6 h-0.5 bg-foreground-primary duration-200 ease-[cubic-bezier(0.77,0,0.175,1)] transition-opacity hamburger-bar--middle"></div><div class="block w-6 h-0.5 bg-foreground-primary duration-200 ease-[cubic-bezier(0.77,0,0.175,1)] transition-transform hamburger-bar--bottom"></div><span class="sr-only">Toggle navigation menu</span></button></div></div><nav class="flex items-center pl-4 bg-header-highlight z-10 h-[var(--subnav-height)] overflow-x-auto xlplus:pl-0"><ul class="flex w-full max-w-7xl mx-auto items-center gap-6"><li><a class="whitespace-nowrap text-sm md:text-base p-0 text-gray-800 block relative after:absolute after:bottom-0 after:left-0 after:origin-right after:transition-transform after:scale-x-0 after:block after:w-full after:h-px after:bg-gray-800 hover:after:scale-x-100 hover:after:origin-left font-bold" data-active aria-current="location" href="/deploy/"><span>Deno Deploy</span></a></li><li><a class="whitespace-nowrap text-sm md:text-base p-0 text-gray-800 block relative after:absolute after:bottom-0 after:left-0 after:origin-right after:transition-transform after:scale-x-0 after:block after:w-full after:h-px after:bg-gray-800 hover:after:scale-x-100 hover:after:origin-left "  href="/sandbox/"><span>Deno Sandbox</span></a></li><li><a class="whitespace-nowrap text-sm md:text-base p-0 text-gray-800 block relative after:absolute after:bottom-0 after:left-0 after:origin-right after:transition-transform after:scale-x-0 after:block after:w-full after:h-px after:bg-gray-800 hover:after:scale-x-100 hover:after:origin-left "  href="/deploy/classic/"><span>Deploy Classic</span></a></li><li><a class="whitespace-nowrap text-sm md:text-base p-0 text-gray-800 block relative after:absolute after:bottom-0 after:left-0 after:origin-right after:transition-transform after:scale-x-0 after:block after:w-full after:h-px after:bg-gray-800 hover:after:scale-x-100 hover:after:origin-left "  href="/subhosting/manual/"><span>Subhosting</span></a></li></ul></nav></header><div class="layout layout--three-column"><aside class="fixed transition-all duration-200 md:duration-0 easing-[cubic-bezier(0.165,0.84,0.44,1)] -translate-x-full z-50 w-full bg-background-raw opacity-0 p-4 pb-8 overflow-auto text-smaller md:sticky md:overflow-y-auto md:[scrollbar-width:thin] md:z-10 md:!translate-x-0 md:!opacity-100 md:p-0 md:pb-16 lg:border-r lg:border-r-foreground-tertiary lg:w-full sidebar-open:translate-x-0 sidebar-open:opacity-100
         top-header-plus-subnav h-screen-minus-both" data-component="sidebar-nav" data-section="deploy" id="nav" style="scrollbar-width: none;" tabIndex="-1"><nav><h2 class="block uppercase py-2 pr-4 mt-4 text-foreground-secondary font-bold leading-[1.2] text-balance tracking-wide !border-0">Deno Deploy</h2><ul class="p-0 list-none overflow-y-hidden "><li><a href="/deploy/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >About</a></li><li><a href="/deploy/getting_started/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Getting started</a></li></ul></nav><nav><h2 class="block uppercase py-2 pr-4 mt-4 text-foreground-secondary font-bold leading-[1.2] text-balance tracking-wide !border-0">Reference</h2><ul class="p-0 list-none overflow-y-hidden "><li><a href="https://console.deno.com/api/v2/docs" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >REST API</a></li><li><a href="/deploy/reference/accounts/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Accounts</a></li><li><a href="/deploy/reference/organizations/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Organizations</a></li><li><a href="/deploy/reference/apps/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Apps</a></li><li><a href="/deploy/reference/builds/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Builds</a></li><li><a href="/deploy/reference/env_vars_and_contexts/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Environment Variables and Contexts</a></li><li><a href="/deploy/reference/timelines/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Timelines</a></li><li><a href="/deploy/reference/tunnel/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Tunnel</a></li><li><a href="/deploy/reference/observability/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Observability</a></li><li><a href="/deploy/reference/domains/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Domains</a></li><li><a href="/deploy/reference/deno_kv/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Deno KV</a></li><li><a href="/deploy/reference/databases/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Databases</a></li><li><a href="/deploy/reference/cloud_connections/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 bg-header-highlight border-foreground-secondary text-gray-800" data-active>Cloud Connections</a></li><li><a href="/deploy/reference/oidc/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >OIDC</a></li><li><a href="/deploy/reference/runtime/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Runtime</a></li><li><a href="/deploy/reference/frameworks/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Framework support</a></li><li><a href="/deploy/reference/caching/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >CDN and caching</a></li><li><a href="/deploy/reference/playgrounds/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Playgrounds</a></li><li><a href="/deploy/reference/button/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Deploy Button</a></li></ul></nav><nav><h2 class="block uppercase py-2 pr-4 mt-4 text-foreground-secondary font-bold leading-[1.2] text-balance tracking-wide !border-0">KV</h2><ul class="p-0 list-none overflow-y-hidden "><li><a href="/deploy/kv/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Overview</a></li><li><a href="/deploy/kv/key_space/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Key space</a></li><li><a href="/deploy/kv/operations/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Operations</a></li><li><a href="/deploy/kv/key_expiration/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Key expiration</a></li><li><a href="/deploy/kv/secondary_indexes/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Secondary indexes</a></li><li><a href="/deploy/kv/transactions/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Transactions</a></li><li><a href="/deploy/kv/node/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Node</a></li><li><a href="/deploy/kv/data_modeling_typescript/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Data modeling</a></li><li><a href="/deploy/kv/backup/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Backup</a></li></ul></nav><nav><h2 class="block uppercase py-2 pr-4 mt-4 text-foreground-secondary font-bold leading-[1.2] text-balance tracking-wide !border-0">政策和限制</h2><ul class="p-0 list-none overflow-y-hidden "><li><a href="/deploy/usage/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Usage and Limitations</a></li><li><a href="/deploy/acceptable_use_policy/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Acceptable Use Policy</a></li><li><a href="/deploy/fulfillment_policy/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Fulfillment Policy</a></li><li><a href="/deploy/privacy_policy/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Privacy Policy</a></li><li><a href="/deploy/security/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Security</a></li><li><a href="/deploy/terms_and_conditions/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Terms and Conditions</a></li></ul></nav><nav><h2 class="block uppercase py-2 pr-4 mt-4 text-foreground-secondary font-bold leading-[1.2] text-balance tracking-wide !border-0">Support and Feedback</h2><ul class="p-0 list-none overflow-y-hidden "><li><a href="/deploy/changelog/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Changelog</a></li><li><a href="/deploy/support/" class="block m-0 py-1 px-3 border-l hover:bg-header-highlight hover:border-foreground-secondary hover:text-gray-800 transition-colors duration-150 border-foreground-tertiary" >Support</a></li></ul></nav></aside><main id="content" class="content "><div class="w-full"><article class="mx-auto"><details class="block lg:hidden my-4 bg-foreground-quaternary rounded-md group"><summary class="px-4 py-2 group-open:border-b border-background-tertiary">On this page</summary><ul class="p-4 pt-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">工作原理 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%AE%BE%E7%BD%AE-aws" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">设置 AWS </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">使用方法 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%AE%BE%E7%BD%AE-gcp" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">设置 GCP </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">使用方法 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%88%A0%E9%99%A4%E4%BA%91%E9%9B%86%E6%88%90" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">删除云集成 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%AE%BE%E7%BD%AE%E6%8C%87%E5%8D%97" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">设置指南 </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-deno-deploy-setup-aws-%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">AWS：使用 deno deploy setup-aws 简单设置 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-aws-cli" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">AWS：使用 aws CLI </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">前提条件 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-oidc-%E6%8F%90%E4%BE%9B%E8%80%85" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 1 步：创建 OIDC 提供者 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B8%A6%E4%BF%A1%E4%BB%BB%E7%AD%96%E7%95%A5%E7%9A%84-iam-%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 2 步：创建带信任策略的 IAM 角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-iam-%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 3 步：创建 IAM 角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E9%99%84%E5%8A%A0%E7%AD%96%E7%95%A5" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 4 步：附加策略 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-aws-%E6%8E%A7%E5%88%B6%E5%8F%B0" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">AWS：使用 AWS 控制台 </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-oidc-%E8%BA%AB%E4%BB%BD%E6%8F%90%E4%BE%9B%E8%80%85" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 1 步：创建 OIDC 身份提供者 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-iam-%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 2 步：创建 IAM 角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E4%BF%A1%E4%BB%BB%E7%AD%96%E7%95%A5%E6%9D%A1%E4%BB%B6" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 3 步：配置信任策略条件 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E9%99%84%E5%8A%A0%E6%9D%83%E9%99%90%E7%AD%96%E7%95%A5" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 4 步：附加权限策略 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E5%91%BD%E5%90%8D%E5%B9%B6%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 5 步：命名并创建角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E5%A4%8D%E5%88%B6%E8%A7%92%E8%89%B2-arn" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 6 步：复制角色 ARN </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-terraform" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">AWS：使用 Terraform </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#terraform-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">Terraform 配置示例 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">使用示例 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">应用配置 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AD%96%E7%95%A5" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">自定义策略 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-deno-deploy-setup-gcp-%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">GCP：使用 deno deploy setup-gcp 简单设置 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-gcloud-cli" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">GCP：使用 gcloud CLI </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">前提条件 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%90%AF%E7%94%A8%E5%BF%85%E9%9C%80-api" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 1 步：启用必需 API </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%B1%A0" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 2 步：创建工作负载身份池 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%8F%90%E4%BE%9B%E8%80%85" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 3 步：创建工作负载身份提供者 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 4 步：创建服务账号 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E7%BB%91%E5%AE%9A" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 5 步：配置工作负载身份绑定 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E6%8E%88%E4%BA%88%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 6 步：授予服务账号角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-7-%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%BF%85%E8%A6%81%E7%9A%84%E5%80%BC" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 7 步：获取必要的值 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-gcp-%E6%8E%A7%E5%88%B6%E5%8F%B0" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">GCP：使用 GCP 控制台 </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%90%AF%E7%94%A8%E5%BF%85%E9%9C%80-api-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 1 步：启用必需 API </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%B1%A0-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 2 步：创建工作负载身份池 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%90%E4%BE%9B%E8%80%85%E5%88%B0%E6%B1%A0%E4%B8%AD" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 3 步：添加提供者到池中 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 4 步：创建服务账号 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E6%8E%88%E4%BA%88%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 5 步：授予服务账号角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E7%BB%91%E5%AE%9A" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 6 步：配置工作负载身份绑定 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-7-%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%BF%85%E8%A6%81%E7%9A%84%E5%80%BC-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 7 步：获取必要的值 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-8-%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 8 步：验证配置 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-terraform" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">GCP：使用 Terraform </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#terraform-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">Terraform 配置示例 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">使用示例 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">应用配置 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">自定义角色 </a></li></ul></li></ul></li></ul></details><div data-color-mode="auto" data-light-theme="light" data-dark-theme="dark" class="markdown-body mt-6 sm:mt-6"><h1>云连接</h1><p>Deno Deploy 允许您连接到诸如 AWS 和 Google Cloud Platform（GCP）之类的云提供商，而无需手动管理静态凭据。这是通过使用 OpenID Connect (OIDC) 和身份联合来实现的。</p>
<h2 id="%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" tabindex="-1">工作原理 <a class="header-anchor" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h2>
<p>Deno Deploy 是一个 OIDC 提供者。每个运行中的 Deno Deploy 应用都可以被签发由 Deno Deploy 签名的短期有效 JWT 令牌。这些令牌包含关于该应用的信息，例如组织和应用的 ID 和别名、应用执行的上下文，以及运行的修订版本 ID。了解更多关于 <a href="/deploy/reference/oidc">Deno Deploy 中的 OIDC</a>。</p>
<p>通过将这些令牌发送到 AWS 或 GCP，可以将它们兑换为短期有效的 AWS 或 GCP 凭据，从而访问云资源，例如 AWS S3 存储桶或 Google Cloud Spanner 实例。向 AWS 或 GCP 发送令牌时，云提供商会验证该令牌，检查它是否由 Deno Deploy 签发，且是否有效且允许特定应用和上下文访问云资源。</p>
<p>为了使 AWS 或 GCP 能够将 OIDC 令牌兑换为凭据，云提供商需要配置为信任 Deno Deploy 作为 OIDC 身份提供者，并需要创建 AWS IAM 角色或 GCP 服务账号，使其允许特定 Deno Deploy 应用将令牌兑换为凭据的操作。</p>
<h2 id="%E8%AE%BE%E7%BD%AE-aws" tabindex="-1">设置 AWS <a class="header-anchor" href="#%E8%AE%BE%E7%BD%AE-aws"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h2>
<p>本指南包含三种设置 AWS 资源的指导。您可以使用任意一种方式完成 AWS 资源的设置。</p>
<ul>
<li><a href="#aws%e2%9a%a0-easy-setup-with-deno-deploy-setup-aws">在本地使用 <code>deno deploy setup-aws</code> 命令</a>（推荐）</li>
<li><a href="#setup-aws-cli">使用 <code>aws</code> CLI</a></li>
<li><a href="#setup-aws-console">使用 AWS 控制台</a></li>
<li><a href="#setup-aws-terraform">使用 Terraform</a></li>
</ul>
<p>要在您的 AWS 账户中设置与 Deno Deploy 的 AWS 集成，需要创建以下资源：</p>
<ul>
<li>一个
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_create_oidc.html">AWS IAM OIDC 身份提供者</a>
来信任 Deno Deploy 作为 OIDC 提供者。
<ul>
<li>OIDC 提供者 URL 为 <code>https://oidc.deno.com</code>。</li>
<li>受众（客户端 ID）为 <code>sts.amazonaws.com</code>。</li>
</ul>
</li>
<li>一个
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html">AWS IAM 角色</a>
，可使用 Deno Deploy 的 OIDC 令牌进行“切换”（登录）。
<ul>
<li>
<p>角色的信任策略应允许 OIDC 提供者切换角色，例如：</p>
<div class="relative"><pre><code class="highlight notranslate language-json"><span class="token punctuation">{</span>
  <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
  <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
      <span class="token property">"Principal"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"Federated"</span><span class="token operator">:</span> <span class="token string">"arn:aws:iam::&lt;account-id>:oidc-provider/oidc.deno.com"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token string">"sts:AssumeRoleWithWebIdentity"</span><span class="token punctuation">,</span>
      <span class="token property">"Condition"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"StringEquals"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"oidc.deno.com:aud"</span><span class="token operator">:</span> <span class="token string">"sts.amazonaws.com"</span><span class="token punctuation">,</span>
          <span class="token property">"oidc.deno.com:sub"</span><span class="token operator">:</span> <span class="token string">"deployment:&lt;organization-slug>/&lt;application-slug>/&lt;context-name>"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>

      <button id="copy-button-73" class="copyButton" data-copy="{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;Federated&quot;: &quot;arn:aws:iam::<account-id>:oidc-provider/oidc.deno.com&quot;
      },
      &quot;Action&quot;: &quot;sts:AssumeRoleWithWebIdentity&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;oidc.deno.com:aud&quot;: &quot;sts.amazonaws.com&quot;,
          &quot;oidc.deno.com:sub&quot;: &quot;deployment:<organization-slug>/<application-slug>/<context-name>&quot;
        }
      }
    }
  ]
}
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div></li>
<li>
<p>角色应拥有访问您想使用的 AWS 资源（如 S3 存储桶或 DynamoDB 表）的权限。</p>
</li>
</ul>
</li>
</ul>
<p>设置完 AWS 资源后，从应用设置中前往 AWS 云集成设置页面。在那里，您必须选择应可用云连接的上下文。</p>
<p>然后必须输入之前创建的 AWS IAM 角色的 ARN（亚马逊资源名称）。输入 ARN 后，可以点击“测试连接”按钮开始连接测试。连接测试会检查 AWS IAM 角色和 OIDC 提供者是否已正确配置，并且不会允许未授权的应用、组织或上下文访问。</p>
<p>测试连接成功后，即可保存云连接。</p>
<h3 id="%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" tabindex="-1">使用方法 <a class="header-anchor" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>在建立 AWS 与 Deno Deploy 之间的云连接后，您可以直接从应用代码访问 AWS 资源（如 S3），无需配置任何凭据。</p>
<p>AWS SDK v3 会自动按云连接配置使用凭据。以下是一个示例，展示如何从配置了 AWS 账户的 Deno Deploy 应用访问 S3 存储桶。</p>
<div class="relative"><pre><code class="highlight notranslate language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> ListBucketsCommand<span class="token punctuation">,</span> S3Client <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@aws-sdk/client-s3"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> s3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">S3Client</span><span class="token punctuation">(</span><span class="token punctuation">{</span> region<span class="token operator">:</span> <span class="token string">"us-west-2"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Deno<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> Buckets <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> s3<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ListBucketsCommand</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>Buckets<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

      <button id="copy-button-101" class="copyButton" data-copy="import { ListBucketsCommand, S3Client } from &quot;@aws-sdk/client-s3&quot;;

const s3 = new S3Client({ region: &quot;us-west-2&quot; });

Deno.serve(() => {
  const { Buckets } = await s3.send(new ListBucketsCommand({}));
  return Response.json(Buckets);
});
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h2 id="%E8%AE%BE%E7%BD%AE-gcp" tabindex="-1">设置 GCP <a class="header-anchor" href="#%E8%AE%BE%E7%BD%AE-gcp"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h2>
<p>要在您的 GCP 账户中设置与 Deno Deploy 的集成，需要创建以下资源：</p>
<ul>
<li>一个
<a href="https://cloud.google.com/iam/docs/workload-identity-federation-with-other-providers">工作负载身份池和工作负载身份提供者</a>
，信任 Deno Deploy 作为 OIDC 提供者。
<ul>
<li>OIDC 提供者 URL 为 <code>https://oidc.deno.com</code>。</li>
<li>受众应为默认值（以 <code>https://iam.googleapis.com</code> 开头）。</li>
<li>至少需设置以下属性映射：
<ul>
<li><code>google.subject = assertion.sub</code></li>
<li><code>attribute.full_slug = assertion.org_slug + &quot;/&quot; + assertion.app_slug</code></li>
</ul>
</li>
</ul>
</li>
<li>一个
<a href="https://cloud.google.com/iam/docs/service-accounts-create">服务账号</a>
，可用 OIDC 令牌“模拟”（登录）。
<ul>
<li>来自工作负载身份池的主体或主体集合应拥有使用工作负载身份用户角色 (<code>roles/iam.workloadIdentityUser</code>) 访问该服务账号的权限。示例：
<ul>
<li>应用中的特定上下文：
<code>principal://iam.googleapis.com/projects/&lt;PROJECT_NUMBER&gt;/locations/global/workloadIdentityPools/oidc-deno-com/subject/deployment:&lt;ORG_SLUG&gt;/&lt;APP_SLUG&gt;/&lt;CONTEXT_NAME&gt;</code></li>
<li>应用中的所有上下文：
<code>principalSet://iam.googleapis.com/projects/&lt;PROJECT_NUMBER&gt;/locations/global/workloadIdentityPools/oidc-deno-com/attribute.full_slug/&lt;ORG_SLUG&gt;/&lt;APP_SLUG&gt;</code></li>
</ul>
</li>
<li>服务账号应拥有访问您想使用的 GCP 资源的权限，例如 Google Cloud Storage 存储桶。</li>
</ul>
</li>
</ul>
<p>本指南包含三种设置 GCP 资源的指导。您可以使用任意一种方式完成 GCP 资源的设置。</p>
<ul>
<li><a href="#setup-gcp-easy">在本地使用 <code>deno deploy setup-gcp</code> 命令</a>（推荐）</li>
<li><a href="#setup-gcp-cli">使用 <code>gcloud</code> CLI</a></li>
<li><a href="#setup-gcp-console">使用 GCP 控制台</a></li>
<li><a href="#setup-gcp-terraform">使用 Terraform</a></li>
</ul>
<p>设置完 GCP 资源后，前往应用设置中的 GCP 云集成设置页面。在那里，您必须选择应可用云连接的上下文。</p>
<p>然后您必须输入工作负载身份提供者 ID，格式为<br>
<code>projects/&lt;PROJECT_NUMBER&gt;/locations/global/workloadIdentityPools/oidc-deno-com/providers/oidc-deno-com</code>，<br>
以及之前创建的 GCP 服务账号邮箱。输入邮箱后，点击“测试连接”按钮开始连接测试。连接测试会检查 GCP 服务账号和 OIDC 提供者是否已正确配置，并且不会允许未授权的应用、组织或上下文访问。</p>
<p>测试成功后，即可保存云连接。</p>
<h3 id="%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-1" tabindex="-1">使用方法 <a class="header-anchor" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>在建立 GCP 与 Deno Deploy 之间的云连接后，您可以直接从应用代码访问 GCP 资源（如 Cloud Storage），无需配置任何凭据。</p>
<p>Google Cloud SDK 会自动按云连接配置使用凭据。以下是一个示例，展示如何从配置了 GCP 账户的 Deno Deploy 应用访问 Cloud Storage 存储桶。</p>
<div class="relative"><pre><code class="highlight notranslate language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> Storage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@google-cloud/storage"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> storage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Deno<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>buckets<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> storage<span class="token punctuation">.</span><span class="token function">getBuckets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>buckets<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

      <button id="copy-button-216" class="copyButton" data-copy="import { Storage } from &quot;@google-cloud/storage&quot;;

const storage = new Storage();

Deno.serve(() => {
  const [buckets] = await storage.getBuckets();
  return Response.json(buckets);
});
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h2 id="%E5%88%A0%E9%99%A4%E4%BA%91%E9%9B%86%E6%88%90" tabindex="-1">删除云集成 <a class="header-anchor" href="#%E5%88%A0%E9%99%A4%E4%BA%91%E9%9B%86%E6%88%90"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h2>
<p>您可以在云集成部分，点击特定云连接旁边的“删除”按钮来删除该云连接。</p>
<h2 id="%E8%AE%BE%E7%BD%AE%E6%8C%87%E5%8D%97" tabindex="-1">设置指南 <a class="header-anchor" href="#%E8%AE%BE%E7%BD%AE%E6%8C%87%E5%8D%97"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h2>
<h3 id="aws%EF%BC%9A%E4%BD%BF%E7%94%A8-deno-deploy-setup-aws-%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE" tabindex="-1">AWS：使用 <code>deno deploy setup-aws</code> 简单设置 <a class="header-anchor" href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-deno-deploy-setup-aws-%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>有关如何使用 <code>deno deploy setup-aws</code> 命令设置 AWS 与 Deno Deploy 集成的说明，请参阅应用设置中的 AWS 云集成设置页面的说明。</p>
<h3 id="aws%EF%BC%9A%E4%BD%BF%E7%94%A8-aws-cli" tabindex="-1">AWS：使用 <code>aws</code> CLI <a class="header-anchor" href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-aws-cli"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>您可以使用 AWS CLI 手动设置 AWS 资源。此方法要求已安装并配置 AWS CLI，且拥有创建 IAM 角色、OIDC 提供者和附加策略的权限。</p>
<h4 id="%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6" tabindex="-1">前提条件 <a class="header-anchor" href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ul>
<li>已安装并配置 AWS CLI</li>
<li>拥有创建 IAM 角色、OIDC 提供者和附加策略的权限</li>
</ul>
<h4 id="%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-oidc-%E6%8F%90%E4%BE%9B%E8%80%85" tabindex="-1">第 1 步：创建 OIDC 提供者 <a class="header-anchor" href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-oidc-%E6%8F%90%E4%BE%9B%E8%80%85"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>如果还未创建 OIDC 提供者，请运行：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">aws iam create-open-id-connect-provider <span class="token punctuation">\</span>
  <span class="token parameter variable">--url</span> https://oidc.deno.com <span class="token punctuation">\</span>
  --client-id-list sts.amazonaws.com
</code></pre>

      <button id="copy-button-259" class="copyButton" data-copy="aws iam create-open-id-connect-provider \
  --url https://oidc.deno.com \
  --client-id-list sts.amazonaws.com
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B8%A6%E4%BF%A1%E4%BB%BB%E7%AD%96%E7%95%A5%E7%9A%84-iam-%E8%A7%92%E8%89%B2" tabindex="-1">第 2 步：创建带信任策略的 IAM 角色 <a class="header-anchor" href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B8%A6%E4%BF%A1%E4%BB%BB%E7%AD%96%E7%95%A5%E7%9A%84-iam-%E8%A7%92%E8%89%B2"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>创建一个信任策略文件，允许您的 Deno Deploy 应用切换角色。您可以选择允许所有上下文访问，或者只允许特定上下文。</p>
<p><strong>针对应用中所有上下文：</strong></p>
<div class="relative"><pre><code class="highlight notranslate language-bash"><span class="token comment"># 为整个应用创建信任策略文件</span>
<span class="token function">cat</span> <span class="token operator">></span> trust-policy-all-contexts.json <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Federated": "arn:aws:iam::YOUR_ACCOUNT_ID:oidc-provider/oidc.deno.com"
      },
      "Action": "sts:AssumeRoleWithWebIdentity",
      "Condition": {
        "StringLike": {
          "oidc.deno.com:sub": "deployment:YOUR_ORG/YOUR_APP/*"
        }
      }
    }
  ]
}
EOF</span>
</code></pre>

      <button id="copy-button-269" class="copyButton" data-copy="# 为整个应用创建信任策略文件
cat > trust-policy-all-contexts.json << EOF
{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;Federated&quot;: &quot;arn:aws:iam::YOUR_ACCOUNT_ID:oidc-provider/oidc.deno.com&quot;
      },
      &quot;Action&quot;: &quot;sts:AssumeRoleWithWebIdentity&quot;,
      &quot;Condition&quot;: {
        &quot;StringLike&quot;: {
          &quot;oidc.deno.com:sub&quot;: &quot;deployment:YOUR_ORG/YOUR_APP/*&quot;
        }
      }
    }
  ]
}
EOF
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><p><strong>针对特定上下文：</strong></p>
<div class="relative"><pre><code class="highlight notranslate language-bash"><span class="token comment"># 为特定上下文创建信任策略文件</span>
<span class="token function">cat</span> <span class="token operator">></span> trust-policy-specific-contexts.json <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Federated": "arn:aws:iam::YOUR_ACCOUNT_ID:oidc-provider/oidc.deno.com"
      },
      "Action": "sts:AssumeRoleWithWebIdentity",
      "Condition": {
        "StringEquals": {
          "oidc.deno.com:sub": [
            "deployment:YOUR_ORG/YOUR_APP/production",
            "deployment:YOUR_ORG/YOUR_APP/staging"
          ]
        }
      }
    }
  ]
}
EOF</span>
</code></pre>

      <button id="copy-button-273" class="copyButton" data-copy="# 为特定上下文创建信任策略文件
cat > trust-policy-specific-contexts.json << EOF
{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;Federated&quot;: &quot;arn:aws:iam::YOUR_ACCOUNT_ID:oidc-provider/oidc.deno.com&quot;
      },
      &quot;Action&quot;: &quot;sts:AssumeRoleWithWebIdentity&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;oidc.deno.com:sub&quot;: [
            &quot;deployment:YOUR_ORG/YOUR_APP/production&quot;,
            &quot;deployment:YOUR_ORG/YOUR_APP/staging&quot;
          ]
        }
      }
    }
  ]
}
EOF
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-iam-%E8%A7%92%E8%89%B2" tabindex="-1">第 3 步：创建 IAM 角色 <a class="header-anchor" href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-iam-%E8%A7%92%E8%89%B2"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>使用相应的信任策略创建角色：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash"><span class="token comment"># 针对整个应用</span>
aws iam create-role <span class="token punctuation">\</span>
  --role-name DenoDeploy-YourOrg-YourApp <span class="token punctuation">\</span>
  --assume-role-policy-document file://trust-policy-all-contexts.json

<span class="token comment"># 或针对特定上下文</span>
aws iam create-role <span class="token punctuation">\</span>
  --role-name DenoDeploy-YourOrg-YourApp <span class="token punctuation">\</span>
  --assume-role-policy-document file://trust-policy-specific-contexts.json
</code></pre>

      <button id="copy-button-280" class="copyButton" data-copy="# 针对整个应用
aws iam create-role \
  --role-name DenoDeploy-YourOrg-YourApp \
  --assume-role-policy-document file://trust-policy-all-contexts.json

# 或针对特定上下文
aws iam create-role \
  --role-name DenoDeploy-YourOrg-YourApp \
  --assume-role-policy-document file://trust-policy-specific-contexts.json
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E9%99%84%E5%8A%A0%E7%AD%96%E7%95%A5" tabindex="-1">第 4 步：附加策略 <a class="header-anchor" href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E9%99%84%E5%8A%A0%E7%AD%96%E7%95%A5"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>附加所需策略，以授予应用访问 AWS 资源的权限：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">aws iam attach-role-policy <span class="token punctuation">\</span>
  --role-name DenoDeploy-YourOrg-YourApp <span class="token punctuation">\</span>
  --policy-arn arn:aws:iam::aws:policy/POLICY_NAME
</code></pre>

      <button id="copy-button-287" class="copyButton" data-copy="aws iam attach-role-policy \
  --role-name DenoDeploy-YourOrg-YourApp \
  --policy-arn arn:aws:iam::aws:policy/POLICY_NAME
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><p>将 <code>POLICY_NAME</code> 替换为合适的 AWS 策略（例如 <code>AmazonS3ReadOnlyAccess</code>、<code>AmazonDynamoDBReadOnlyAccess</code> 等），根据您的需求选择。</p>
<p>完成上述步骤后，在 Deno Deploy 云连接配置中使用角色 ARN。</p>
<h3 id="aws%EF%BC%9A%E4%BD%BF%E7%94%A8-aws-%E6%8E%A7%E5%88%B6%E5%8F%B0" tabindex="-1">AWS：使用 AWS 控制台 <a class="header-anchor" href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-aws-%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>您也可以通过 AWS 管理控制台网页界面设置 AWS 资源，此方式提供了一个直观的配置方法。</p>
<h4 id="%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-oidc-%E8%BA%AB%E4%BB%BD%E6%8F%90%E4%BE%9B%E8%80%85" tabindex="-1">第 1 步：创建 OIDC 身份提供者 <a class="header-anchor" href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-oidc-%E8%BA%AB%E4%BB%BD%E6%8F%90%E4%BE%9B%E8%80%85"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>进入 IAM 控制台 → 身份提供者</li>
<li>点击“添加提供者”</li>
<li>选择“OpenID Connect”</li>
<li>填写提供者 URL：<code>https://oidc.deno.com</code></li>
<li>受众：<code>sts.amazonaws.com</code></li>
<li>点击“添加提供者”</li>
</ol>
<h4 id="%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-iam-%E8%A7%92%E8%89%B2" tabindex="-1">第 2 步：创建 IAM 角色 <a class="header-anchor" href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-iam-%E8%A7%92%E8%89%B2"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>进入 IAM 控制台 → 角色</li>
<li>点击“创建角色”</li>
<li>选择受信实体类型为 <strong>Web 身份</strong></li>
<li>选择刚才创建的 OIDC 提供者（<code>oidc.deno.com</code>）</li>
<li>受众填写 <code>sts.amazonaws.com</code></li>
</ol>
<h4 id="%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E4%BF%A1%E4%BB%BB%E7%AD%96%E7%95%A5%E6%9D%A1%E4%BB%B6" tabindex="-1">第 3 步：配置信任策略条件 <a class="header-anchor" href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E4%BF%A1%E4%BB%BB%E7%AD%96%E7%95%A5%E6%9D%A1%E4%BB%B6"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>添加条件限制哪些 Deno Deploy 应用可切换此角色。选择一种方式：</p>
<p><strong>应用中所有上下文：</strong></p>
<ul>
<li>条件键：<code>oidc.deno.com:sub</code></li>
<li>操作符：<code>StringLike</code></li>
<li>值：<code>deployment:YOUR_ORG/YOUR_APP/*</code></li>
</ul>
<p><strong>特定上下文：</strong></p>
<ul>
<li>条件键：<code>oidc.deno.com:sub</code></li>
<li>操作符：<code>StringEquals</code></li>
<li>值：<code>deployment:YOUR_ORG/YOUR_APP/production</code></li>
<li>对每个上下文（如 staging、development）添加额外条件</li>
</ul>
<p>点击“下一步”继续。</p>
<h4 id="%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E9%99%84%E5%8A%A0%E6%9D%83%E9%99%90%E7%AD%96%E7%95%A5" tabindex="-1">第 4 步：附加权限策略 <a class="header-anchor" href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E9%99%84%E5%8A%A0%E6%9D%83%E9%99%90%E7%AD%96%E7%95%A5"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>根据需求搜索并选择合适的策略：
<ul>
<li>S3 访问：<code>AmazonS3ReadOnlyAccess</code> 或 <code>AmazonS3FullAccess</code></li>
<li>DynamoDB 访问：<code>AmazonDynamoDBReadOnlyAccess</code> 或 <code>AmazonDynamoDBFullAccess</code></li>
<li>其他服务：选择相应策略</li>
</ul>
</li>
<li>点击“下一步”</li>
</ol>
<h4 id="%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E5%91%BD%E5%90%8D%E5%B9%B6%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2" tabindex="-1">第 5 步：命名并创建角色 <a class="header-anchor" href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E5%91%BD%E5%90%8D%E5%B9%B6%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>角色名：<code>DenoDeploy-YourOrg-YourApp</code>（替换为您的组织及应用名）</li>
<li>说明：可选填写角色用途描述</li>
<li>审核信任策略和权限</li>
<li>点击“创建角色”</li>
</ol>
<h4 id="%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E5%A4%8D%E5%88%B6%E8%A7%92%E8%89%B2-arn" tabindex="-1">第 6 步：复制角色 ARN <a class="header-anchor" href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E5%A4%8D%E5%88%B6%E8%A7%92%E8%89%B2-arn"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>创建完成后：</p>
<ol>
<li>进入角色详情页</li>
<li>复制角色 ARN（格式为 <code>arn:aws:iam::123456789012:role/DenoDeploy-YourOrg-YourApp</code>）</li>
<li>在 Deno Deploy 云连接配置中使用该 ARN</li>
</ol>
<h3 id="aws%EF%BC%9A%E4%BD%BF%E7%94%A8-terraform" tabindex="-1">AWS：使用 Terraform <a class="header-anchor" href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-terraform"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>您可以使用 Terraform 编程方式创建所需的 AWS 资源。此方案适合基础设施即代码的工作流程。</p>
<h4 id="terraform-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B" tabindex="-1">Terraform 配置示例 <a class="header-anchor" href="#terraform-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>创建一个 Terraform 配置文件，内容如下：</p>
<div class="relative"><pre><code class="highlight notranslate language-hcl"># 变量定义
variable "org" {
  description = "Deno Deploy 组织名称"
  type        = string
}

variable "app" {
  description = "Deno Deploy 应用名称"
  type        = string
}

variable "contexts" {
  description = "允许的特定上下文列表（留空表示允许所有上下文）"
  type        = list(string)
  default     = []
}

# OIDC 提供者资源
resource "aws_iam_openid_connect_provider" "deno_deploy" {
  url = "https://oidc.deno.com"
  client_id_list = ["sts.amazonaws.com"]
}

# 根据上下文动态生成的 IAM 角色
resource "aws_iam_role" "deno_deploy_role" {
  name = "DenoDeploy-${var.org}-${var.app}"

  assume_role_policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Effect = "Allow"
        Principal = {
          Federated = aws_iam_openid_connect_provider.deno_deploy.arn
        }
        Action = "sts:AssumeRoleWithWebIdentity"
        Condition = length(var.contexts) > 0 ? {
          # 只允许特定上下文
          StringEquals = {
            "oidc.deno.com:sub" = [
              for context in var.contexts : "deployment:${var.org}/${var.app}/${context}"
            ]
          }
        } : {
          # 允许所有上下文（通配符）
          StringLike = {
            "oidc.deno.com:sub" = "deployment:${var.org}/${var.app}/*"
          }
        }
      }
    ]
  })
}

# 附加策略
resource "aws_iam_role_policy_attachment" "example" {
  role       = aws_iam_role.deno_deploy_role.name
  policy_arn = "arn:aws:iam::aws:policy/POLICY_NAME"
}

# 输出角色 ARN
output "role_arn" {
  value = aws_iam_role.deno_deploy_role.arn
}
</code></pre>

      <button id="copy-button-511" class="copyButton" data-copy="# 变量定义
variable &quot;org&quot; {
  description = &quot;Deno Deploy 组织名称&quot;
  type        = string
}

variable &quot;app&quot; {
  description = &quot;Deno Deploy 应用名称&quot;
  type        = string
}

variable &quot;contexts&quot; {
  description = &quot;允许的特定上下文列表（留空表示允许所有上下文）&quot;
  type        = list(string)
  default     = []
}

# OIDC 提供者资源
resource &quot;aws_iam_openid_connect_provider&quot; &quot;deno_deploy&quot; {
  url = &quot;https://oidc.deno.com&quot;
  client_id_list = [&quot;sts.amazonaws.com&quot;]
}

# 根据上下文动态生成的 IAM 角色
resource &quot;aws_iam_role&quot; &quot;deno_deploy_role&quot; {
  name = &quot;DenoDeploy-${var.org}-${var.app}&quot;

  assume_role_policy = jsonencode({
    Version = &quot;2012-10-17&quot;
    Statement = [
      {
        Effect = &quot;Allow&quot;
        Principal = {
          Federated = aws_iam_openid_connect_provider.deno_deploy.arn
        }
        Action = &quot;sts:AssumeRoleWithWebIdentity&quot;
        Condition = length(var.contexts) > 0 ? {
          # 只允许特定上下文
          StringEquals = {
            &quot;oidc.deno.com:sub&quot; = [
              for context in var.contexts : &quot;deployment:${var.org}/${var.app}/${context}&quot;
            ]
          }
        } : {
          # 允许所有上下文（通配符）
          StringLike = {
            &quot;oidc.deno.com:sub&quot; = &quot;deployment:${var.org}/${var.app}/*&quot;
          }
        }
      }
    ]
  })
}

# 附加策略
resource &quot;aws_iam_role_policy_attachment&quot; &quot;example&quot; {
  role       = aws_iam_role.deno_deploy_role.name
  policy_arn = &quot;arn:aws:iam::aws:policy/POLICY_NAME&quot;
}

# 输出角色 ARN
output &quot;role_arn&quot; {
  value = aws_iam_role.deno_deploy_role.arn
}
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" tabindex="-1">使用示例 <a class="header-anchor" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p><strong>针对整个应用（所有上下文）访问：</strong></p>
<div class="relative"><pre><code class="highlight notranslate language-hcl">module "deno_deploy_aws" {
  source = "./path-to-terraform-module"

  org      = "your-org"
  app      = "your-app"
  contexts = []  # 空表示所有上下文
}
</code></pre>

      <button id="copy-button-518" class="copyButton" data-copy="module &quot;deno_deploy_aws&quot; {
  source = &quot;./path-to-terraform-module&quot;

  org      = &quot;your-org&quot;
  app      = &quot;your-app&quot;
  contexts = []  # 空表示所有上下文
}
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><p><strong>仅针对特定上下文：</strong></p>
<div class="relative"><pre><code class="highlight notranslate language-hcl">module "deno_deploy_aws" {
  source = "./path-to-terraform-module"

  org      = "your-org"
  app      = "your-app"
  contexts = ["production", "staging"]
}
</code></pre>

      <button id="copy-button-522" class="copyButton" data-copy="module &quot;deno_deploy_aws&quot; {
  source = &quot;./path-to-terraform-module&quot;

  org      = &quot;your-org&quot;
  app      = &quot;your-app&quot;
  contexts = [&quot;production&quot;, &quot;staging&quot;]
}
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE" tabindex="-1">应用配置 <a class="header-anchor" href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>
<p>初始化 Terraform：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">terraform init
</code></pre>

      <button id="copy-button-531" class="copyButton" data-copy="terraform init
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div></li>
<li>
<p>计划部署：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">terraform plan
</code></pre>

      <button id="copy-button-537" class="copyButton" data-copy="terraform plan
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div></li>
<li>
<p>应用配置：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">terraform apply
</code></pre>

      <button id="copy-button-543" class="copyButton" data-copy="terraform apply
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div></li>
</ol>
<p>应用完成后，Terraform 会输出角色 ARN，供您在 Deno Deploy 云连接配置中使用。</p>
<h4 id="%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AD%96%E7%95%A5" tabindex="-1">自定义策略 <a class="header-anchor" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AD%96%E7%95%A5"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>将 <code>aws_iam_role_policy_attachment</code> 资源中的 <code>POLICY_NAME</code> 替换为适合您的 AWS 托管策略，或根据需求创建自定义策略。您可以通过创建多个策略附件资源添加多个策略。</p>
<h3 id="gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-deno-deploy-setup-gcp-%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE" tabindex="-1">GCP：使用 <code>deno deploy setup-gcp</code> 简单设置 <a class="header-anchor" href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-deno-deploy-setup-gcp-%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>有关如何使用 <code>deno deploy setup-gcp</code> 命令设置 GCP 与 Deno Deploy 集成的说明，请参阅应用设置中的 Google 云集成设置页面的说明。</p>
<h3 id="gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-gcloud-cli" tabindex="-1">GCP：使用 <code>gcloud</code> CLI <a class="header-anchor" href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-gcloud-cli"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>您可以使用 gcloud CLI 手动设置 GCP 资源。此方法需要安装并认证 gcloud CLI，且拥有创建工作负载身份池、服务账号和授予 IAM 角色的权限。</p>
<h4 id="%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6-1" tabindex="-1">前提条件 <a class="header-anchor" href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ul>
<li>安装并认证 gcloud CLI</li>
<li>拥有创建工作负载身份池、服务账号和授予 IAM 角色权限</li>
<li>启用以下必需 API：
<ul>
<li><code>iam.googleapis.com</code></li>
<li><code>iamcredentials.googleapis.com</code></li>
<li><code>sts.googleapis.com</code></li>
</ul>
</li>
</ul>
<h4 id="%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%90%AF%E7%94%A8%E5%BF%85%E9%9C%80-api" tabindex="-1">第 1 步：启用必需 API <a class="header-anchor" href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%90%AF%E7%94%A8%E5%BF%85%E9%9C%80-api"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>先为项目启用必需的 API：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">gcloud services <span class="token builtin class-name">enable</span> iam.googleapis.com
gcloud services <span class="token builtin class-name">enable</span> iamcredentials.googleapis.com
gcloud services <span class="token builtin class-name">enable</span> sts.googleapis.com
</code></pre>

      <button id="copy-button-610" class="copyButton" data-copy="gcloud services enable iam.googleapis.com
gcloud services enable iamcredentials.googleapis.com
gcloud services enable sts.googleapis.com
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%B1%A0" tabindex="-1">第 2 步：创建工作负载身份池 <a class="header-anchor" href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%B1%A0"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>创建工作负载身份池以管理外部身份：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">gcloud iam workload-identity-pools create oidc-deno-com <span class="token punctuation">\</span>
  <span class="token parameter variable">--location</span><span class="token operator">=</span>global <span class="token punctuation">\</span>
  --display-name<span class="token operator">=</span><span class="token string">"Deno Deploy Workload Identity Pool"</span>
</code></pre>

      <button id="copy-button-617" class="copyButton" data-copy="gcloud iam workload-identity-pools create oidc-deno-com \
  --location=global \
  --display-name=&quot;Deno Deploy Workload Identity Pool&quot;
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%8F%90%E4%BE%9B%E8%80%85" tabindex="-1">第 3 步：创建工作负载身份提供者 <a class="header-anchor" href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%8F%90%E4%BE%9B%E8%80%85"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>在工作负载身份池中配置 OIDC 提供者：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">gcloud iam workload-identity-pools providers create-oidc oidc-deno-com <span class="token punctuation">\</span>
  --workload-identity-pool<span class="token operator">=</span>oidc-deno-com <span class="token punctuation">\</span>
  <span class="token parameter variable">--location</span><span class="token operator">=</span>global <span class="token punctuation">\</span>
  --issuer-uri<span class="token operator">=</span>https://oidc.deno.com <span class="token punctuation">\</span>
  --attribute-mapping<span class="token operator">=</span><span class="token string">"google.subject=assertion.sub,attribute.org_slug=assertion.org_slug,attribute.app_slug=assertion.app_slug,attribute.full_slug=assertion.org_slug+<span class="token entity" title="\&quot;">\"</span>/<span class="token entity" title="\&quot;">\"</span>+assertion.app_slug"</span>
</code></pre>

      <button id="copy-button-624" class="copyButton" data-copy="gcloud iam workload-identity-pools providers create-oidc oidc-deno-com \
  --workload-identity-pool=oidc-deno-com \
  --location=global \
  --issuer-uri=https://oidc.deno.com \
  --attribute-mapping=&quot;google.subject=assertion.sub,attribute.org_slug=assertion.org_slug,attribute.app_slug=assertion.app_slug,attribute.full_slug=assertion.org_slug+\&quot;/\&quot;+assertion.app_slug&quot;
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7" tabindex="-1">第 4 步：创建服务账号 <a class="header-anchor" href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>创建供您的 Deno Deploy 应用使用的服务账号：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">gcloud iam service-accounts create deno-your-org-your-app <span class="token punctuation">\</span>
  --display-name<span class="token operator">=</span><span class="token string">"Deno Deploy YourOrg/YourApp"</span>
</code></pre>

      <button id="copy-button-631" class="copyButton" data-copy="gcloud iam service-accounts create deno-your-org-your-app \
  --display-name=&quot;Deno Deploy YourOrg/YourApp&quot;
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E7%BB%91%E5%AE%9A" tabindex="-1">第 5 步：配置工作负载身份绑定 <a class="header-anchor" href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E7%BB%91%E5%AE%9A"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>获取项目编号，并配置工作负载身份绑定。可选择允许所有上下文访问或仅特定上下文访问。</p>
<div class="relative"><pre><code class="highlight notranslate language-bash"><span class="token comment"># 获取项目编号</span>
<span class="token assign-left variable">PROJECT_NUMBER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>gcloud projects describe PROJECT_ID <span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">"value(projectNumber)"</span><span class="token variable">)</span></span>
</code></pre>

      <button id="copy-button-638" class="copyButton" data-copy="# 获取项目编号
PROJECT_NUMBER=$(gcloud projects describe PROJECT_ID --format=&quot;value(projectNumber)&quot;)
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><p><strong>应用中所有上下文：</strong></p>
<div class="relative"><pre><code class="highlight notranslate language-bash">gcloud iam service-accounts add-iam-policy-binding <span class="token punctuation">\</span>
  deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com <span class="token punctuation">\</span>
  <span class="token parameter variable">--role</span><span class="token operator">=</span>roles/iam.workloadIdentityUser <span class="token punctuation">\</span>
  <span class="token parameter variable">--member</span><span class="token operator">=</span><span class="token string">"principalSet://iam.googleapis.com/projects/<span class="token variable">$PROJECT_NUMBER</span>/locations/global/workloadIdentityPools/oidc-deno-com/attribute.full_slug/YOUR_ORG/YOUR_APP"</span>
</code></pre>

      <button id="copy-button-642" class="copyButton" data-copy="gcloud iam service-accounts add-iam-policy-binding \
  deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com \
  --role=roles/iam.workloadIdentityUser \
  --member=&quot;principalSet://iam.googleapis.com/projects/$PROJECT_NUMBER/locations/global/workloadIdentityPools/oidc-deno-com/attribute.full_slug/YOUR_ORG/YOUR_APP&quot;
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><p><strong>仅特定上下文：</strong></p>
<div class="relative"><pre><code class="highlight notranslate language-bash"><span class="token comment"># 绑定到生产上下文</span>
gcloud iam service-accounts add-iam-policy-binding <span class="token punctuation">\</span>
  deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com <span class="token punctuation">\</span>
  <span class="token parameter variable">--role</span><span class="token operator">=</span>roles/iam.workloadIdentityUser <span class="token punctuation">\</span>
  <span class="token parameter variable">--member</span><span class="token operator">=</span><span class="token string">"principal://iam.googleapis.com/projects/<span class="token variable">$PROJECT_NUMBER</span>/locations/global/workloadIdentityPools/oidc-deno-com/subject/deployment:YOUR_ORG/YOUR_APP/production"</span>

<span class="token comment"># 绑定到预发布上下文</span>
gcloud iam service-accounts add-iam-policy-binding <span class="token punctuation">\</span>
  deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com <span class="token punctuation">\</span>
  <span class="token parameter variable">--role</span><span class="token operator">=</span>roles/iam.workloadIdentityUser <span class="token punctuation">\</span>
  <span class="token parameter variable">--member</span><span class="token operator">=</span><span class="token string">"principal://iam.googleapis.com/projects/<span class="token variable">$PROJECT_NUMBER</span>/locations/global/workloadIdentityPools/oidc-deno-com/subject/deployment:YOUR_ORG/YOUR_APP/staging"</span>

<span class="token comment"># 根据需要为每个特定上下文添加更多绑定</span>
</code></pre>

      <button id="copy-button-646" class="copyButton" data-copy="# 绑定到生产上下文
gcloud iam service-accounts add-iam-policy-binding \
  deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com \
  --role=roles/iam.workloadIdentityUser \
  --member=&quot;principal://iam.googleapis.com/projects/$PROJECT_NUMBER/locations/global/workloadIdentityPools/oidc-deno-com/subject/deployment:YOUR_ORG/YOUR_APP/production&quot;

# 绑定到预发布上下文
gcloud iam service-accounts add-iam-policy-binding \
  deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com \
  --role=roles/iam.workloadIdentityUser \
  --member=&quot;principal://iam.googleapis.com/projects/$PROJECT_NUMBER/locations/global/workloadIdentityPools/oidc-deno-com/subject/deployment:YOUR_ORG/YOUR_APP/staging&quot;

# 根据需要为每个特定上下文添加更多绑定
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E6%8E%88%E4%BA%88%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E8%A7%92%E8%89%B2" tabindex="-1">第 6 步：授予服务账号角色 <a class="header-anchor" href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E6%8E%88%E4%BA%88%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E8%A7%92%E8%89%B2"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>授予服务账号访问 GCP 资源所需的角色：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">gcloud projects add-iam-policy-binding PROJECT_ID <span class="token punctuation">\</span>
  <span class="token parameter variable">--member</span><span class="token operator">=</span><span class="token string">"serviceAccount:deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--role</span><span class="token operator">=</span><span class="token string">"roles/ROLE_NAME"</span>
</code></pre>

      <button id="copy-button-653" class="copyButton" data-copy="gcloud projects add-iam-policy-binding PROJECT_ID \
  --member=&quot;serviceAccount:deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com&quot; \
  --role=&quot;roles/ROLE_NAME&quot;
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><p>将 <code>ROLE_NAME</code> 替换为适当的角色，例如：</p>
<ul>
<li><code>roles/storage.objectViewer</code>（Cloud Storage 读取访问）</li>
<li><code>roles/storage.objectAdmin</code>（Cloud Storage 完全访问）</li>
<li><code>roles/cloudsql.client</code>（Cloud SQL 访问）</li>
<li>根据需求选择其他角色</li>
</ul>
<h4 id="%E7%AC%AC-7-%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%BF%85%E8%A6%81%E7%9A%84%E5%80%BC" tabindex="-1">第 7 步：获取必要的值 <a class="header-anchor" href="#%E7%AC%AC-7-%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%BF%85%E8%A6%81%E7%9A%84%E5%80%BC"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>设置完成后，您需获取两个值用于 Deno Deploy 配置：</p>
<ol>
<li><strong>工作负载提供者 ID</strong>：<br>
<code>projects/PROJECT_NUMBER/locations/global/workloadIdentityPools/oidc-deno-com/providers/oidc-deno-com</code></li>
<li><strong>服务账号邮箱地址</strong>：<br>
<code>deno-your-org-your-app@PROJECT_ID.iam.gserviceaccount.com</code></li>
</ol>
<p>将这些值用于 Deno Deploy 云连接配置。</p>
<h3 id="gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-gcp-%E6%8E%A7%E5%88%B6%E5%8F%B0" tabindex="-1">GCP：使用 GCP 控制台 <a class="header-anchor" href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-gcp-%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>您也可以通过 Google Cloud 控制台网页界面设置 GCP 资源，此方式提供工作负载身份联合和服务账号的可视化配置。</p>
<h4 id="%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%90%AF%E7%94%A8%E5%BF%85%E9%9C%80-api-1" tabindex="-1">第 1 步：启用必需 API <a class="header-anchor" href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%90%AF%E7%94%A8%E5%BF%85%E9%9C%80-api-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>进入 API 与服务 → 库</li>
<li>搜索并启用以下 API：
<ul>
<li>“身份和访问管理 (IAM) API”</li>
<li>“IAM 服务账号凭证 API”</li>
<li>“安全令牌服务 API”</li>
</ul>
</li>
</ol>
<h4 id="%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%B1%A0-1" tabindex="-1">第 2 步：创建工作负载身份池 <a class="header-anchor" href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%B1%A0-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>进入 IAM 与管理员 → 工作负载身份联合</li>
<li>点击“创建池”</li>
<li>填写：
<ul>
<li>池名称：<code>Deno Deploy Workload Id Pool</code></li>
<li>池 ID：<code>oidc-deno-com</code></li>
</ul>
</li>
<li>点击“继续”</li>
</ol>
<h4 id="%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%90%E4%BE%9B%E8%80%85%E5%88%B0%E6%B1%A0%E4%B8%AD" tabindex="-1">第 3 步：添加提供者到池中 <a class="header-anchor" href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%90%E4%BE%9B%E8%80%85%E5%88%B0%E6%B1%A0%E4%B8%AD"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>点击“添加提供者”</li>
<li>选择提供者类型为 <strong>OpenID Connect (OIDC)</strong></li>
<li>填写：
<ul>
<li>提供者名称：<code>Deno Deploy OIDC Provider</code></li>
<li>提供者 ID：<code>oidc-deno-com</code></li>
<li>签发者 URL：<code>https://oidc.deno.com</code></li>
</ul>
</li>
<li>配置属性映射：
<ul>
<li><code>google.subject</code> → <code>assertion.sub</code></li>
<li><code>attribute.org_slug</code> → <code>assertion.org_slug</code></li>
<li><code>attribute.app_slug</code> → <code>assertion.app_slug</code></li>
<li><code>attribute.full_slug</code> → <code>assertion.org_slug + &quot;/&quot; + assertion.app_slug</code></li>
</ul>
</li>
<li>点击“保存”</li>
</ol>
<h4 id="%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7-1" tabindex="-1">第 4 步：创建服务账号 <a class="header-anchor" href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>进入 IAM 与管理员 → 服务账号</li>
<li>点击“创建服务账号”</li>
<li>填写：
<ul>
<li>服务账号名称：<code>deno-your-org-your-app</code></li>
<li>服务账号 ID：<code>deno-your-org-your-app</code></li>
<li>描述：<code>Deno Deploy 项目 your-org/your-app 的服务账号</code></li>
</ul>
</li>
<li>点击“创建并继续”</li>
</ol>
<h4 id="%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E6%8E%88%E4%BA%88%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E8%A7%92%E8%89%B2" tabindex="-1">第 5 步：授予服务账号角色 <a class="header-anchor" href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E6%8E%88%E4%BA%88%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E8%A7%92%E8%89%B2"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>根据需要选择角色：
<ul>
<li>Cloud Storage：<code>Storage 对象查看者</code> 或 <code>Storage 管理员</code></li>
<li>Cloud SQL：<code>Cloud SQL 客户端</code></li>
<li>其他服务：选择相关角色</li>
</ul>
</li>
<li>点击“继续”，然后“完成”</li>
</ol>
<h4 id="%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E7%BB%91%E5%AE%9A" tabindex="-1">第 6 步：配置工作负载身份绑定 <a class="header-anchor" href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E7%BB%91%E5%AE%9A"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>
<p>回到已创建的服务账号</p>
</li>
<li>
<p>点击“有访问权限的主体”标签</p>
</li>
<li>
<p>点击“授予访问权限”</p>
</li>
<li>
<p>配置主体 - 选择一种方式：</p>
<p><strong>应用中所有上下文：</strong></p>
<ul>
<li>新主体：<br>
<code>principalSet://iam.googleapis.com/projects/YOUR_PROJECT_NUMBER/locations/global/workloadIdentityPools/oidc-deno-com/attribute.full_slug/YOUR_ORG/YOUR_APP</code></li>
</ul>
<p><strong>仅特定上下文：</strong></p>
<ul>
<li>新主体：<br>
<code>principal://iam.googleapis.com/projects/YOUR_PROJECT_NUMBER/locations/global/workloadIdentityPools/oidc-deno-com/subject/deployment:YOUR_ORG/YOUR_APP/production</code></li>
<li>对每个上下文（如 staging 等）重复添加</li>
</ul>
</li>
<li>
<p>角色：<strong>工作负载身份用户</strong></p>
</li>
<li>
<p>点击“保存”</p>
</li>
</ol>
<h4 id="%E7%AC%AC-7-%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%BF%85%E8%A6%81%E7%9A%84%E5%80%BC-1" tabindex="-1">第 7 步：获取必要的值 <a class="header-anchor" href="#%E7%AC%AC-7-%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%BF%85%E8%A6%81%E7%9A%84%E5%80%BC-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>您需要两个值用于 Deno Deploy 配置：</p>
<ol>
<li><strong>工作负载提供者 ID</strong>：
<ul>
<li>回到工作负载身份联合</li>
<li>点击您的池，然后点击您的提供者</li>
<li>复制提供者资源名称（完整路径，以 <code>projects/</code> 开头）</li>
</ul>
</li>
<li><strong>服务账号邮箱</strong>：在服务账号详情页复制</li>
</ol>
<h4 id="%E7%AC%AC-8-%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE" tabindex="-1">第 8 步：验证配置 <a class="header-anchor" href="#%E7%AC%AC-8-%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>最终工作负载身份池概览应显示：</p>
<ul>
<li>您的工作负载身份池与 OIDC 提供者</li>
<li>已连接的服务账号</li>
<li>已正确配置的绑定</li>
</ul>
<p>在 Deno Deploy 云连接配置中使用服务账号邮箱和工作负载提供者 ID。</p>
<h3 id="gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-terraform" tabindex="-1">GCP：使用 Terraform <a class="header-anchor" href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-terraform"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h3>
<p>您可以使用 Terraform 编程方式创建 GCP 所需的资源。此方案适合基础设施即代码的工作流程。</p>
<h4 id="terraform-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B-1" tabindex="-1">Terraform 配置示例 <a class="header-anchor" href="#terraform-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p>创建一个 Terraform 配置文件，内容如下：</p>
<div class="relative"><pre><code class="highlight notranslate language-hcl"># 变量定义
variable "org" {
  description = "Deno Deploy 组织名称"
  type        = string
}

variable "app" {
  description = "Deno Deploy 应用名称"
  type        = string
}

variable "contexts" {
  description = "允许的特定上下文列表（留空表示允许所有上下文）"
  type        = list(string)
  default     = []
}

variable "project_id" {
  description = "GCP 项目 ID"
  type        = string
}

variable "roles" {
  description = "授予服务账号的 IAM 角色列表"
  type        = list(string)
  default     = []
}

# 项目信息数据源
data "google_project" "project" {
  project_id = var.project_id
}

# 工作负载身份池
resource "google_iam_workload_identity_pool" "deno_deploy" {
  workload_identity_pool_id = "oidc-deno-com"
  display_name              = "Deno Deploy Workload Id Pool"
}

# 工作负载身份提供者
resource "google_iam_workload_identity_pool_provider" "deno_deploy" {
  workload_identity_pool_id           = google_iam_workload_identity_pool.deno_deploy.workload_identity_pool_id
  workload_identity_pool_provider_id = "oidc-deno-com"
  display_name                       = "Deno Deploy OIDC Provider"

  attribute_mapping = {
    "google.subject"      = "assertion.sub"
    "attribute.org_slug"  = "assertion.org_slug"
    "attribute.app_slug"  = "assertion.app_slug"
    "attribute.full_slug" = "assertion.org_slug + \"/\" + assertion.app_slug"
  }

  oidc {
    issuer_uri = "https://oidc.deno.com"
  }
}

# 服务账号
resource "google_service_account" "deno_deploy" {
  account_id   = "deno-${var.org}-${var.app}"
  display_name = "Deno Deploy ${var.org}/${var.app}"
}

# 基于上下文动态配置的工作负载身份绑定
resource "google_service_account_iam_binding" "workload_identity" {
  service_account_id = google_service_account.deno_deploy.name
  role               = "roles/iam.workloadIdentityUser"

  members = length(var.contexts) > 0 ? [
    # 仅允许特定上下文
    for context in var.contexts :
    "principal://iam.googleapis.com/projects/${data.google_project.project.number}/locations/global/workloadIdentityPools/${google_iam_workload_identity_pool.deno_deploy.workload_identity_pool_id}/subject/deployment:${var.org}/${var.app}/${context}"
  ] : [
    # 允许所有上下文（使用属性映射）
    "principalSet://iam.googleapis.com/projects/${data.google_project.project.number}/locations/global/workloadIdentityPools/${google_iam_workload_identity_pool.deno_deploy.workload_identity_pool_id}/attribute.full_slug/${var.org}/${var.app}"
  ]
}

# 授予服务账号权限
resource "google_project_iam_member" "service_account_roles" {
  for_each = toset(var.roles)
  project  = var.project_id
  role     = each.value
  member   = "serviceAccount:${google_service_account.deno_deploy.email}"
}

# 输出工作负载提供者 ID
output "workload_provider_id" {
  value = "projects/${data.google_project.project.number}/locations/global/workloadIdentityPools/${google_iam_workload_identity_pool.deno_deploy.workload_identity_pool_id}/providers/${google_iam_workload_identity_pool_provider.deno_deploy.workload_identity_pool_provider_id}"
}

# 输出服务账号邮箱
output "service_account_email" {
  value = google_service_account.deno_deploy.email
}
</code></pre>

      <button id="copy-button-1051" class="copyButton" data-copy="# 变量定义
variable &quot;org&quot; {
  description = &quot;Deno Deploy 组织名称&quot;
  type        = string
}

variable &quot;app&quot; {
  description = &quot;Deno Deploy 应用名称&quot;
  type        = string
}

variable &quot;contexts&quot; {
  description = &quot;允许的特定上下文列表（留空表示允许所有上下文）&quot;
  type        = list(string)
  default     = []
}

variable &quot;project_id&quot; {
  description = &quot;GCP 项目 ID&quot;
  type        = string
}

variable &quot;roles&quot; {
  description = &quot;授予服务账号的 IAM 角色列表&quot;
  type        = list(string)
  default     = []
}

# 项目信息数据源
data &quot;google_project&quot; &quot;project&quot; {
  project_id = var.project_id
}

# 工作负载身份池
resource &quot;google_iam_workload_identity_pool&quot; &quot;deno_deploy&quot; {
  workload_identity_pool_id = &quot;oidc-deno-com&quot;
  display_name              = &quot;Deno Deploy Workload Id Pool&quot;
}

# 工作负载身份提供者
resource &quot;google_iam_workload_identity_pool_provider&quot; &quot;deno_deploy&quot; {
  workload_identity_pool_id           = google_iam_workload_identity_pool.deno_deploy.workload_identity_pool_id
  workload_identity_pool_provider_id = &quot;oidc-deno-com&quot;
  display_name                       = &quot;Deno Deploy OIDC Provider&quot;

  attribute_mapping = {
    &quot;google.subject&quot;      = &quot;assertion.sub&quot;
    &quot;attribute.org_slug&quot;  = &quot;assertion.org_slug&quot;
    &quot;attribute.app_slug&quot;  = &quot;assertion.app_slug&quot;
    &quot;attribute.full_slug&quot; = &quot;assertion.org_slug + \&quot;/\&quot; + assertion.app_slug&quot;
  }

  oidc {
    issuer_uri = &quot;https://oidc.deno.com&quot;
  }
}

# 服务账号
resource &quot;google_service_account&quot; &quot;deno_deploy&quot; {
  account_id   = &quot;deno-${var.org}-${var.app}&quot;
  display_name = &quot;Deno Deploy ${var.org}/${var.app}&quot;
}

# 基于上下文动态配置的工作负载身份绑定
resource &quot;google_service_account_iam_binding&quot; &quot;workload_identity&quot; {
  service_account_id = google_service_account.deno_deploy.name
  role               = &quot;roles/iam.workloadIdentityUser&quot;

  members = length(var.contexts) > 0 ? [
    # 仅允许特定上下文
    for context in var.contexts :
    &quot;principal://iam.googleapis.com/projects/${data.google_project.project.number}/locations/global/workloadIdentityPools/${google_iam_workload_identity_pool.deno_deploy.workload_identity_pool_id}/subject/deployment:${var.org}/${var.app}/${context}&quot;
  ] : [
    # 允许所有上下文（使用属性映射）
    &quot;principalSet://iam.googleapis.com/projects/${data.google_project.project.number}/locations/global/workloadIdentityPools/${google_iam_workload_identity_pool.deno_deploy.workload_identity_pool_id}/attribute.full_slug/${var.org}/${var.app}&quot;
  ]
}

# 授予服务账号权限
resource &quot;google_project_iam_member&quot; &quot;service_account_roles&quot; {
  for_each = toset(var.roles)
  project  = var.project_id
  role     = each.value
  member   = &quot;serviceAccount:${google_service_account.deno_deploy.email}&quot;
}

# 输出工作负载提供者 ID
output &quot;workload_provider_id&quot; {
  value = &quot;projects/${data.google_project.project.number}/locations/global/workloadIdentityPools/${google_iam_workload_identity_pool.deno_deploy.workload_identity_pool_id}/providers/${google_iam_workload_identity_pool_provider.deno_deploy.workload_identity_pool_provider_id}&quot;
}

# 输出服务账号邮箱
output &quot;service_account_email&quot; {
  value = google_service_account.deno_deploy.email
}
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-1" tabindex="-1">使用示例 <a class="header-anchor" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p><strong>针对整个应用（所有上下文）访问：</strong></p>
<div class="relative"><pre><code class="highlight notranslate language-hcl">module "deno_deploy_gcp" {
  source = "./path-to-terraform-module"

  org        = "your-org"
  app        = "your-app"
  project_id = "your-gcp-project-id"
  contexts   = []  # 空列表表示允许所有上下文
  roles      = [
    "roles/storage.objectViewer",
    "roles/cloudsql.client"
  ]
}
</code></pre>

      <button id="copy-button-1058" class="copyButton" data-copy="module &quot;deno_deploy_gcp&quot; {
  source = &quot;./path-to-terraform-module&quot;

  org        = &quot;your-org&quot;
  app        = &quot;your-app&quot;
  project_id = &quot;your-gcp-project-id&quot;
  contexts   = []  # 空列表表示允许所有上下文
  roles      = [
    &quot;roles/storage.objectViewer&quot;,
    &quot;roles/cloudsql.client&quot;
  ]
}
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><p><strong>仅针对特定上下文：</strong></p>
<div class="relative"><pre><code class="highlight notranslate language-hcl">module "deno_deploy_gcp" {
  source = "./path-to-terraform-module"

  org        = "your-org"
  app        = "your-app"
  project_id = "your-gcp-project-id"
  contexts   = ["production", "staging"]
  roles      = [
    "roles/storage.objectAdmin",
    "roles/cloudsql.client"
  ]
}
</code></pre>

      <button id="copy-button-1062" class="copyButton" data-copy="module &quot;deno_deploy_gcp&quot; {
  source = &quot;./path-to-terraform-module&quot;

  org        = &quot;your-org&quot;
  app        = &quot;your-app&quot;
  project_id = &quot;your-gcp-project-id&quot;
  contexts   = [&quot;production&quot;, &quot;staging&quot;]
  roles      = [
    &quot;roles/storage.objectAdmin&quot;,
    &quot;roles/cloudsql.client&quot;
  ]
}
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div><h4 id="%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE-1" tabindex="-1">应用配置 <a class="header-anchor" href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE-1"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<ol>
<li>
<p>初始化 Terraform：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">terraform init
</code></pre>

      <button id="copy-button-1071" class="copyButton" data-copy="terraform init
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div></li>
<li>
<p>计划部署：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">terraform plan
</code></pre>

      <button id="copy-button-1077" class="copyButton" data-copy="terraform plan
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div></li>
<li>
<p>应用配置：</p>
<div class="relative"><pre><code class="highlight notranslate language-bash">terraform apply
</code></pre>

      <button id="copy-button-1083" class="copyButton" data-copy="terraform apply
" title="Copy">
        <svg class="copy-icon" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="7" height="7" fill="none"/>
          <rect x="6" y="6" width="7" height="7" fill="none"/>
          <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="hsla(var(--foreground-secondary))"/>
        </svg>
        <svg class="check-icon hidden" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7.5L6.5 11L12 3" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div></li>
</ol>
<p>应用完成后，Terraform 会输出工作负载提供者 ID 和服务账号邮箱，供您在 Deno Deploy 云连接配置中使用。</p>
<h4 id="%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%92%E8%89%B2" tabindex="-1">自定义角色 <a class="header-anchor" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%92%E8%89%B2"><span class="sr-only">Jump to heading</span><span aria-hidden="true" class="anchor-end">#</span></a></h4>
<p><code>roles</code> 变量接受一个 GCP IAM 角色列表。常见角色包括：</p>
<ul>
<li><code>roles/storage.objectViewer</code> - Cloud Storage 读取权限</li>
<li><code>roles/storage.objectAdmin</code> - Cloud Storage 对象完全权限</li>
<li><code>roles/cloudsql.client</code> - Cloud SQL 访问权限</li>
<li><code>roles/secretmanager.secretAccessor</code> - Secret Manager 访问权限</li>
<li>也可指定自定义角色</li>
</ul>
</div></article><div class="wwads-cn wwads-horizontal w-full my-4" data-id="354"></div><section id="feedback-section" class="flex flex-col mt-12 gap-2 p-4 sm:p-8 bg-blue-splash dark:bg-deploy-900 rounded-md mx-auto"><h2 class="text-xl mb-2 pb-2 font-normal">你找到了你需要的东西吗？</h2><div class="flex flex-col sm:flex-row sm:flex-wrap gap-8"><div class="flex-1"><form aria-live="polite" id="feedback-form"><div id="feedback-form__content" class="grid grid-cols-1 transition-all duration-300 grid-rows-[max-content_0fr] w-full items-start gap-2 overflow-hidden"><div class="flex flex-wrap gap-2 items-center"><input class="sr-only" id="feedback-yes" type="radio" name="feedback-vote" aria-label="Yes" value="yes" required><label class="btn" for="feedback-yes">是的<svg aria-hidden="true" focusable="false" class="color-fg-muted" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;"><path d="M8.834.066c.763.087 1.5.295 2.01.884.505.581.656 1.378.656 2.3 0 .467-.087 1.119-.157 1.637L11.328 5h1.422c.603 0 1.174.085 1.668.333.508.254.911.679 1.137 1.2.453.998.438 2.447.188 4.316l-.04.306c-.105.79-.195 1.473-.313 2.033-.131.63-.315 1.209-.668 1.672C13.97 15.847 12.706 16 11 16c-1.848 0-3.234-.333-4.388-.653-.165-.045-.323-.09-.475-.133-.658-.186-1.2-.34-1.725-.415A1.75 1.75 0 0 1 2.75 16h-1A1.75 1.75 0 0 1 0 14.25v-7.5C0 5.784.784 5 1.75 5h1a1.75 1.75 0 0 1 1.514.872c.258-.105.59-.268.918-.508C5.853 4.874 6.5 4.079 6.5 2.75v-.5c0-1.202.994-2.337 2.334-2.184ZM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.921.921 0 0 0-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.831 5.831 0 0 1-1.567.81ZM2.75 6.5h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path></svg></label><input class="sr-only" id="feedback-no" type="radio" name="feedback-vote" aria-label="No" value="no" required><label class="btn" for="feedback-no">没有<svg aria-hidden="true" focusable="false" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;"><path d="M7.083 15.986c-.763-.087-1.499-.295-2.011-.884-.504-.581-.655-1.378-.655-2.299 0-.468.087-1.12.157-1.638l.015-.112H3.167c-.603 0-1.174-.086-1.669-.334a2.415 2.415 0 0 1-1.136-1.2c-.454-.998-.438-2.447-.188-4.316l.04-.306C.32 4.108.41 3.424.526 2.864c.132-.63.316-1.209.669-1.672C1.947.205 3.211.053 4.917.053c1.848 0 3.234.332 4.388.652l.474.133c.658.187 1.201.341 1.726.415a1.75 1.75 0 0 1 1.662-1.2h1c.966 0 1.75.784 1.75 1.75v7.5a1.75 1.75 0 0 1-1.75 1.75h-1a1.75 1.75 0 0 1-1.514-.872c-.259.105-.59.268-.919.508-.671.491-1.317 1.285-1.317 2.614v.5c0 1.201-.994 2.336-2.334 2.183Zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479l-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.923.923 0 0 0 .443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.878 5.878 0 0 1 1.568-.809Zm1.75 6.798h1a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-1a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25Z"></path></svg></label><a class="btn" target="_blank" href="https://github.com/zhcndoc/deno/edit/main/deploy/reference/cloud_connections.md">编辑此页面<svg width="98" height="96" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;" viewBox="0 0 98 96"><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path></svg></a></div><div id="feedback-more" class="hidden w-full overflow-hidden"><p class="font-semibold !mt-2">我们可以做些什么来改善这个页面？</p><div class="space-y-1"><textarea class="block w-full p-2 border border-foreground-tertiary bg-white dark:bg-background-primary rounded" name="feedback-comment" id="feedback-comment" placeholder="Your feedback will be posted as an issue in the denoland/docs GitHub repo"></textarea></div><div class="space-y-1"><label for="feedback-contact">GitHub 用户名（可选）</label><input type="text" class="block w-full p-2 border border-foreground-tertiary bg-white dark:bg-background-primary rounded" name="feedback-contact" id="feedback-contact" aria-invalid="false" placeholder="username" value=""><p class="text-xs text-gray-600 dark:text-gray-400 italic mt-1">如果提供，您将在创建的 GitHub 问题中被 @提及</p></div><button type="submit" class="btn  mt-4">发送反馈给我们</button></div></div><a rel="" class="mt-4 !underline underline-offset-2 text-xs block" target="_blank" href="/deploy/privacy_policy">隐私政策</a></form></div></div></section></div></main><ul class="toc-list hidden sticky p-4 pr-0 h-screen-minus-header overflow-y-auto border-l border-l-foreground-tertiary lg:block lg:w-full top-header-plus-subnav" id="toc"><div class="wwads-cn wwads-vertical max-w-[200px] my-4" data-id="354"></div><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">工作原理 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%AE%BE%E7%BD%AE-aws" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">设置 AWS </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">使用方法 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%AE%BE%E7%BD%AE-gcp" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">设置 GCP </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">使用方法 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%88%A0%E9%99%A4%E4%BA%91%E9%9B%86%E6%88%90" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">删除云集成 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%AE%BE%E7%BD%AE%E6%8C%87%E5%8D%97" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">设置指南 </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-deno-deploy-setup-aws-%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">AWS：使用 deno deploy setup-aws 简单设置 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-aws-cli" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">AWS：使用 aws CLI </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">前提条件 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-oidc-%E6%8F%90%E4%BE%9B%E8%80%85" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 1 步：创建 OIDC 提供者 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B8%A6%E4%BF%A1%E4%BB%BB%E7%AD%96%E7%95%A5%E7%9A%84-iam-%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 2 步：创建带信任策略的 IAM 角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-iam-%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 3 步：创建 IAM 角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E9%99%84%E5%8A%A0%E7%AD%96%E7%95%A5" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 4 步：附加策略 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-aws-%E6%8E%A7%E5%88%B6%E5%8F%B0" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">AWS：使用 AWS 控制台 </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-oidc-%E8%BA%AB%E4%BB%BD%E6%8F%90%E4%BE%9B%E8%80%85" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 1 步：创建 OIDC 身份提供者 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-iam-%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 2 步：创建 IAM 角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E4%BF%A1%E4%BB%BB%E7%AD%96%E7%95%A5%E6%9D%A1%E4%BB%B6" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 3 步：配置信任策略条件 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E9%99%84%E5%8A%A0%E6%9D%83%E9%99%90%E7%AD%96%E7%95%A5" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 4 步：附加权限策略 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E5%91%BD%E5%90%8D%E5%B9%B6%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 5 步：命名并创建角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E5%A4%8D%E5%88%B6%E8%A7%92%E8%89%B2-arn" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 6 步：复制角色 ARN </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#aws%EF%BC%9A%E4%BD%BF%E7%94%A8-terraform" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">AWS：使用 Terraform </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#terraform-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">Terraform 配置示例 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">使用示例 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">应用配置 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AD%96%E7%95%A5" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">自定义策略 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-deno-deploy-setup-gcp-%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">GCP：使用 deno deploy setup-gcp 简单设置 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-gcloud-cli" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">GCP：使用 gcloud CLI </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">前提条件 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%90%AF%E7%94%A8%E5%BF%85%E9%9C%80-api" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 1 步：启用必需 API </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%B1%A0" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 2 步：创建工作负载身份池 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%8F%90%E4%BE%9B%E8%80%85" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 3 步：创建工作负载身份提供者 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 4 步：创建服务账号 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E7%BB%91%E5%AE%9A" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 5 步：配置工作负载身份绑定 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E6%8E%88%E4%BA%88%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 6 步：授予服务账号角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-7-%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%BF%85%E8%A6%81%E7%9A%84%E5%80%BC" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 7 步：获取必要的值 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-gcp-%E6%8E%A7%E5%88%B6%E5%8F%B0" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">GCP：使用 GCP 控制台 </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-1-%E6%AD%A5%EF%BC%9A%E5%90%AF%E7%94%A8%E5%BF%85%E9%9C%80-api-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 1 步：启用必需 API </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-2-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E6%B1%A0-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 2 步：创建工作负载身份池 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-3-%E6%AD%A5%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%90%E4%BE%9B%E8%80%85%E5%88%B0%E6%B1%A0%E4%B8%AD" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 3 步：添加提供者到池中 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-4-%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 4 步：创建服务账号 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-5-%E6%AD%A5%EF%BC%9A%E6%8E%88%E4%BA%88%E6%9C%8D%E5%8A%A1%E8%B4%A6%E5%8F%B7%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 5 步：授予服务账号角色 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-6-%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E8%BA%AB%E4%BB%BD%E7%BB%91%E5%AE%9A" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 6 步：配置工作负载身份绑定 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-7-%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%BF%85%E8%A6%81%E7%9A%84%E5%80%BC-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 7 步：获取必要的值 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E7%AC%AC-8-%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">第 8 步：验证配置 </a></li></ul></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#gcp%EF%BC%9A%E4%BD%BF%E7%94%A8-terraform" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">GCP：使用 Terraform </a><ul class="ml-2"><li class="m-2 mr-0 leading-4 text-balance"><a href="#terraform-%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">Terraform 配置示例 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">使用示例 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE-1" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">应用配置 </a></li><li class="m-2 mr-0 leading-4 text-balance"><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%92%E8%89%B2" class="text-smaller lg:text-foreground-secondary hover:text-primary transition-colors duration-200 ease-in-out select-none">自定义角色 </a></li></ul></li></ul></li></ul></div><footer class="text-smaller bg-gray-50 dark:bg-gray-950 p-4 pt-12 sm:px-8 border-t border-t-foreground-tertiary"><nav class="flex flex-col gap-x-4 gap-y-12 max-w-7xl md:flex-row md:flex-wrap md:justify-between md:w-full md:gap-y-8 md:mx-auto"><section class="flex-auto"><h3 class="mb-2 uppercase font-bold text-foreground-primary whitespace-pre">Deno 文档</h3><ul class="m-0 p-0 pl-3 border-l border-l-background-tertiary list-none"><li><a class="block mb-2 hover:text-primary hover:underline" href="/runtime/">Deno 运行时</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="/examples/">示例</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://jsr.io/@std">标准库</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="/api/deno/~/Deno">Deno API Reference</a></li></ul></section><section class="flex-auto"><h3 class="mb-2 uppercase font-bold text-foreground-primary whitespace-pre">服务文档</h3><ul class="m-0 p-0 pl-3 border-l border-l-background-tertiary list-none"><li><a class="block mb-2 hover:text-primary hover:underline" href="/deploy/">Deno Deploy </a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="/deploy/classic/">Deno Deploy Classic</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="/subhosting/manual/">Deno 子托管</a></li></ul></section><section class="flex-auto"><h3 class="mb-2 uppercase font-bold text-foreground-primary whitespace-pre">社区</h3><ul class="m-0 p-0 pl-3 border-l border-l-background-tertiary list-none"><li><a class="block mb-2 hover:text-primary hover:underline" href="https://discord.gg/deno">Discord</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://github.com/denoland">GitHub</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://youtube.com/@deno_land">YouTube</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://bsky.app/profile/deno.land">Bluesky</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://fosstodon.org/@deno_land">Mastodon</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://twitter.com/deno_land">Twitter</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://deno.news/">Newsletter</a></li></ul></section><section class="flex-auto"><h3 class="mb-2 uppercase font-bold text-foreground-primary whitespace-pre">帮助与反馈</h3><ul class="m-0 p-0 pl-3 border-l border-l-background-tertiary list-none"><li><a class="block mb-2 hover:text-primary hover:underline" href="https://discord.gg/deno">社区支持</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://denostatus.com">部署系统状态</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://github.com/denoland/deploy_feedback">部署反馈</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="mailto:support@deno.com">报告问题</a></li></ul></section><section class="flex-auto"><h3 class="mb-2 uppercase font-bold text-foreground-primary whitespace-pre">公司</h3><ul class="m-0 p-0 pl-3 border-l border-l-background-tertiary list-none"><li><a class="block mb-2 hover:text-primary hover:underline" href="https://deno.com/">Deno Website</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://deno.com/blog">Blog</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="https://merch.deno.com/">周边商品</a></li><li><a class="block mb-2 hover:text-primary hover:underline" href="/deploy/privacy_policy">Privacy Policy</a></li></ul></section></nav><p class="m-0 mt-16 mx-auto text-center text-xs text-foreground-secondary"><a target="_blank" href="https://www.zhcndoc.com">简中文档</a>｜<a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn">沪ICP备2024070610号-3</a></p></footer></body></html>