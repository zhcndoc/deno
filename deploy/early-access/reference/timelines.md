---
title: 时间线
description: "了解 Deno Deploy 早期访问中的部署时间线，包括生产和开发上下文、活动修订、回滚和时间线锁定。"
---

:::info

您正在查看 Deno Deploy<sup>EA</sup> 的文档。正在寻找经典 Deploy 文档？[点此查看](/deploy/)。

:::

时间线是应用程序某个分支历史的表示。每个时间线由一组修订组成，这些修订是时间线上的各个项目。某个修订（通常是最近的一个）为“活动”修订，即当前正在处理流量的修订。活动修订接收分配给该时间线的所有 URL 的流量。

每个时间线都与一个[上下文](./env-vars-and-contexts.md)相关联，该上下文决定在该时间线上运行的代码可用哪些环境变量。

默认情况下，每个应用程序会设置多个时间线：

- **生产**：生产时间线包含默认 git 分支的所有修订。该时间线负责处理生产流量。此时间线关联至 `https://<app-name>.<org-name>.deno.net`，以及映射至该应用的任何自定义域名。它使用生产环境上下文。

- **Git 分支 / `<branch-name>`**：每个 Git 分支都有自己的时间线。该时间线包含该分支的所有修订。此时间线关联至 `https://<app-name>--<branch-name>.<org-name>.deno.net`。它使用开发环境上下文。

> 每个修订还有一个独立的时间线，该时间线仅包含该修订。这个时间线承载该修订的预览 URL。该时间线关联至 `https://<app-name>-<revision-id>.<org-name>.deno.net`，使用开发环境上下文。
>
> 预览时间线在 UI 的时间线页面中不可见。您可以在该修订的构建页面查看其预览 URL。

您可以在修订的构建页面查看该修订关联的时间线。也可以在时间线页面查看关联某个时间线的修订。

## 活动修订

每个时间线都有一个活动修订。活动修订是当前为该时间线提供流量的修订。您可以在时间线页面查看时间线的活动修订。

通常，活动修订是该时间线中最近构建的修订。但也可以手动锁定其他修订作为活动修订。这使得能够回滚和锁定时间线成为可能：

### 回滚

回滚是将活动修订恢复到之前某个修订的过程，通常是因为较新的修订存在某种错误或问题。通过回滚到已知的良好修订，可以在无需通过 Git 部署新代码、等待构建完成的情况下恢复应用的正常状态。

有关如何回滚时间线的更多信息，请参阅下面的“更改活动修订”。

### 时间线锁定

时间线锁定是将时间线锁定到特定修订，以确保新构建不会自动成为活动修订的过程。如果您处于功能冻结阶段，例如大型活动期间，想要降低风险而不允许新构建部署，这非常有用。当时间线锁定到特定修订时，您仍可通过 Git 推送创建新构建，但这些构建不会自动成为该时间线的活动修订。

有关如何锁定时间线至特定修订的更多信息，请参阅下面的“更改活动修订”。

### 更改活动修订

在时间线页面，您可以将该时间线上的任意修订锁定为活动修订。这样会锁定时间线至该修订，且新构建将不再自动成为该时间线的活动修订。随后，您可以解锁该修订，恢复最新修订为活动修订的默认行为，或锁定其他修订为活动修订。