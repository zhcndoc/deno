---
title: 时间线
---

:::info

您正在查看 Deno Deploy<sup>EA</sup> 的文档。寻找 Deploy Classic 文档？[点此查看](/deploy/)。

:::

时间线是应用程序某一分支历史的表示。每条时间线包含一组修订，修订是时间线中的单个条目。通常其中一个修订（通常是最新的）是“活动”修订，即当前负责处理流量的修订。活动修订会接收分配给该时间线的所有 URL 的流量。

每条时间线都关联一个[上下文](./env-vars-and-contexts.md)，该上下文决定运行在该时间线中的代码可用的环境变量。

默认情况下，每个应用程序都有多个时间线设置：

- **生产环境**：生产时间线包含默认 Git 分支的所有修订。这是负责处理生产流量的时间线。此时间线关联至 `https://<app-name>.<org-name>.deno.net` 及映射到该应用的任何自定义域名。它使用生产环境上下文。

- **Git 分支 / `<branch-name>`**：每个 Git 分支都有自己的时间线。该时间线包含该分支的所有修订。此时间线关联至 `https://<app-name>--<branch-name>.<org-name>.deno.net`。它使用开发环境上下文。

> 每个修订还有一个独立的时间线，该时间线仅包含该修订。这个时间线承载该修订的预览 URL。该时间线关联至 `https://<app-name>-<revision-id>.<org-name>.deno.net`，使用开发环境上下文。
>
> 预览时间线在 UI 的时间线页面中不可见。您可以在该修订的构建页面查看预览 URL。

您可以在修订的构建页面查看该修订关联的时间线，也可以在时间线页面查看关联的修订。

## 活动修订

每条时间线都有一个活动修订。活动修订是当前负责处理该时间线流量的修订。您可以在时间线页面查看某条时间线的活动修订。

通常，活动修订是该时间线上最近构建的修订。但也可以手动锁定其他修订为活动修订，从而实现回滚和时间线锁定：

### 回滚

回滚是将活动修订还原至之前的某个修订的过程，通常是因为较新的修订存在某些错误或问题。通过回滚至已知良好的修订，您可以在不通过 Git 部署新代码并等待构建完成的情况下，将应用恢复至正常状态。

有关如何回滚时间线的更多信息，请参见下文的“更改活动修订”。

### 时间线锁定

时间线锁定是将时间线锁定到特定修订的过程，以确保新构建不会自动成为该时间线的活动修订。这在功能冻结的情况下非常有用，比如在大型活动期间，通过不允许发布新构建来降低风险。当时间线锁定到某个特定修订时，您仍然可以通过 Git 推送创建新构建，但这些新构建不会自动成为锁定时间线的活动修订。

有关如何将时间线锁定到特定修订的更多信息，请参见下文的“更改活动修订”。

### 更改活动修订

在时间线页面，您可以将该时间线上的任意修订锁定为活动修订。这会将时间线锁定到该修订，新构建将不再自动成为该时间线的活动修订。您可以选择解除对该修订的锁定，恢复默认的最新修订为活动修订的行为，或者锁定其他修订作为活动修订。