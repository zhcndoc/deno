---
title: 域名
description: "Deno Deploy 早期访问中的域管理完整指南，包括组织域、自定义域、DNS 配置、TLS 证书和域分配。"
---

:::info

您正在查看 Deno Deploy<sup>EA</sup> 的文档。想查看 Deploy Classic 的文档吗？[请点击这里](/deploy/)。

:::

每个组织都有一个默认域，用于该组织内部部署的所有应用。例如，一个标识为 `acme-inc` 的组织，其默认域为 `acme-inc.deno.net`。名为 `my-app` 的应用将自动获得生产域名 `my-app.acme-inc.deno.net`。

除了这些默认域之外，您还可以为应用添加自定义域。自定义域是您拥有并控制的域。要使用自定义域，您必须：

1. 拥有该域（已从域名注册商购买）
2. 能够编辑其 DNS 记录

自定义域属于某个组织，可以附加到该组织内的任何应用。

自定义域可以添加为：

- 基础域（例如，`example.com` 或特定子域）
- 通配符域（例如，`*.example.com`）

基础域仅适用于单一应用，而通配符域提供更灵活的使用方式。您可以：

- 将整个通配符域分配给一个应用（所有子域指向同一应用）
- 部分分配给多个应用（不同子域指向不同应用）

所有自定义域都需要有效的 TLS 证书。Deno Deploy<sup>EA</sup> 可以通过 Let's Encrypt 自动生成这些证书。

## 添加自定义域

1. 进入组织域页面（点击左上角的组织名称，然后切换到“域”标签）
2. 点击“添加域”
3. 输入您的域（例如 `example.com`）
4. 选择是仅添加该域还是同时包含通配符子域
5. 点击“添加域”

这将打开域配置抽屉。

### DNS 配置

域配置抽屉显示了所需的 DNS 记录，用于：

- 验证域所有权
- 生成 TLS 证书
- 将流量路由到 Deno Deploy<sup>EA</sup>

根据您的域名注册商支持的能力，有三种可能的配置方法：

#### ANAME/ALIAS 方法（首选）

如果您的注册商支持 `ANAME` 或 `ALIAS` 记录，这是最佳选择：

- 添加一个 `ANAME`/`ALIAS` 记录
- 添加一个用于验证的 `CNAME` 记录

#### CNAME 方法

适合子域，但不适用于根域（顶级域）：

- 添加两个 `CNAME` 记录
- 注意：此方法不允许在同一域上使用其他 DNS 记录（如 `MX` 记录）

#### A 记录方法

兼容性最强，但配置较复杂：

- 添加一个 `A` 记录
- 添加一个用于验证的 `CNAME` 记录

> 注意：当前 Deno Deploy<sup>EA</sup> 不支持 IPv6。使用 `ANAME/ALIAS` 或 `CNAME` 方法时，当支持 IPv6 时，您的域名将自动使用 IPv6。使用 `A` 方法时，将在需要添加 `AAAA` 记录时通过邮件通知您。

:::warning

当您使用 Cloudflare 作为 DNS 提供商时，**必须**禁用 `_acme-challenge` CNAME 记录的代理功能（即关闭橙色云图标），否则验证和证书发放会失败。

:::

### 验证

添加 DNS 记录后，Deno Deploy<sup>EA</sup> 会验证您的域所有权。此过程可能需数分钟，具体取决于您的 DNS 提供商。您可以在验证期间保持域配置抽屉开启，完成后它将自动刷新。

您也可以点击“发行证书”按钮手动触发验证。验证成功会同时启动 TLS 证书的申请流程。

### TLS 证书申请

域验证后，点击“发行证书”通过 Let's Encrypt 生成 TLS 证书。此过程最长可达 90 秒。

证书申请完成后，您将看到证书详情，包括到期时间和签发时间。

证书会在临近到期时自动续期。您可以在域配置抽屉中查看当前证书状态。

## 将自定义域分配给应用

添加自定义域到您的组织后：

1. 进入组织域页面
2. 在自定义域旁点击“分配”
3. 选择目标应用
4. 如果使用通配符域，选择附加的是基础域、通配符还是特定子域
5. 点击“分配域名”

## 取消自定义域与应用的关联

1. 进入应用设置页面
2. 找到“自定义域”部分
3. 点击要取消关联的域旁的“移除”

这将把域名从该应用移除，但该域仍可在您的组织中用于其他应用。

## 删除自定义域

1. 进入组织域页面
2. 打开域配置抽屉
3. 点击“删除”并确认

此操作将自定义域从组织中移除，并删除该域在所有应用上的分配。您还可以选择是否将基础域、通配符子域或特定子域绑定到应用。

选择应用和域后，点击“分配域名”按钮确认。

## 取消自定义域与应用关联（重复段落）

要取消自定义域与某个应用的关联，请进入该应用设置页面，并在“自定义域”部分使用“移除”按钮删除该自定义域。

此操作会取消自定义域与应用的关联，但不会将自定义域从组织中移除。该自定义域仍可在组织内用于其他应用。

## 删除自定义域（重复段落）

要从组织中删除自定义域，请进入组织域页面并打开域配置抽屉。点击“删除”按钮并确认，即可将自定义域从组织移除，并删除该域在所有组织内应用的分配。