---
title: 域名
description: "Deno Deploy 早期访问中的域管理完整指南，包括组织域、自定义域、DNS 配置、TLS 证书和域分配。"
---

:::info

您正在查看 Deno Deploy<sup>EA</sup> 的文档。想查看 Deploy Classic 的文档吗？[请点击这里](/deploy/)。

:::

每个组织都有一个默认域，用于该组织内部部署的所有应用。例如，一个标识为 `acme-inc` 的组织，其默认域为 `acme-inc.deno.net`。名为 `my-app` 的应用将自动获得生产域名 `my-app.acme-inc.deno.net`。

除了这些默认域之外，您还可以为应用添加自定义域。自定义域是您拥有并控制的域。要使用自定义域，您必须：

1. 拥有该域（已从域名注册商购买）
2. 能够编辑其 DNS 记录

自定义域属于某个组织，可以附加到该组织内的任何应用。

自定义域可以添加为：

- 基础域（例如，`example.com` 或特定子域）
- 通配符域（例如，`*.example.com`）

基础域仅适用于单一应用，而通配符域提供更灵活的使用方式。您可以：

- 将整个通配符域分配给一个应用（所有子域指向同一应用）
- 部分分配给多个应用（不同子域指向不同应用）

所有自定义域都需要有效的 TLS 证书。Deno Deploy<sup>EA</sup> 可以通过 Let's Encrypt 自动生成这些证书。

## 添加自定义域

1. 进入组织域页面（点击左上角的组织名称，然后切换到“域”标签）
2. 点击“添加域”
3. 输入您的域（例如 `example.com`）
4. 选择是仅添加该域还是同时包含通配符子域
5. 点击“添加域”

这将打开域配置抽屉。

### DNS 配置

域配置抽屉显示了所需的 DNS 记录，用于：

- 验证域所有权
- 生成 TLS 证书
- 将流量路由到 Deno Deploy<sup>EA</sup>

根据您的域名注册商支持的能力，有三种可能的配置方法：

#### ANAME/ALIAS 方法（首选）

如果您的注册商支持 `ANAME` 或 `ALIAS` 记录，这是最佳选择：

- 添加一个 `ANAME`/`ALIAS` 记录
- 添加一个用于验证的 `CNAME` 记录

#### CNAME 方法

适合子域，但不适用于根域（顶级域）：

- 添加两个 `CNAME` 记录
- 注意：此方法不允许在同一域上使用其他 DNS 记录（如 `MX` 记录）

#### A 记录方法

兼容性最强，但配置较复杂：

- 添加一个 `A` 记录
- 添加一个用于验证的 `CNAME` 记录

> 注意：当前 Deno Deploy<sup>EA</sup> 不支持 IPv6。使用 `ANAME/ALIAS` 或 `CNAME` 方法时，当支持 IPv6 时，您的域名将自动使用 IPv6。使用 `A` 方法时，将在需要添加 `AAAA` 记录时通过邮件通知您。

:::warning

当您使用 Cloudflare 作为 DNS 提供商时，**必须**禁用 `_acme-challenge` CNAME 记录的代理功能（即关闭橙色云图标），否则验证和证书发放会失败。

:::

### 验证

添加 DNS 记录后，Deno Deploy<sup>EA</sup> 将验证您的域所有权。此过程根据您的 DNS 提供商可能需要几分钟时间。您可以在验证期间保持域配置抽屉打开——验证完成后它会自动刷新。

您可以通过点击“生成证书”按钮手动触发验证。验证成功同时会启动 TLS 证书的生成。

### TLS 证书生成

域名验证后，点击“生成证书”按钮，通过 Let's Encrypt 生成 TLS 证书。这个过程最多需 90 秒钟。

生成后，您将看到证书的详细信息，包括到期时间和颁发时间。

证书会在接近到期时自动续签。您可以在域配置抽屉中查看当前证书状态。

## 将自定义域分配给应用

添加自定义域到组织后：

1. 进入组织域页面
2. 点击自定义域旁的“分配”按钮
3. 选择目标应用
4. 若使用通配符域，选择是附加基础域、通配符子域还是特定子域
5. 点击“分配域名”

## 从应用中撤销自定义域分配

1. 进入应用设置页面
2. 找到“自定义域”部分
3. 点击要撤销分配的域名旁的“移除”按钮

这将从该应用移除域名，但该域名仍在您的组织中保留，可用于其他应用。

## 删除自定义域

1. 进入组织域页面
2. 打开域配置抽屉
3. 点击“删除”并确认

这会将自定义域从您的组织中移除，并删除该域在所有应用中的所有分配。选择是附加基础域、通配符子域还是任何特定子域到应用。

选择好应用和域后，点击“分配域名”按钮以确认。

## 从应用中撤销自定义域分配（重复段落，删除此段）

去应用设置页面，在“自定义域”部分，点击“移除”按钮撤销自定义域分配。该域名仍保留在组织内，可供其他应用使用。

## 删除自定义域（重复段落，删除此段）

进入组织域页面，打开域配置抽屉，点击“删除”按钮并确认。该操作会将自定义域从组织中删除，并清除所有应用中的自定义域分配。