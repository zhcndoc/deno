---
title: "入门指南"
description: "逐步指南，帮助您创建和配置您的第一个 Deno Deploy 早期访问应用程序，包括组织设置、构建配置、环境变量和部署监控。"
---

:::info

您正在查看 Deno Deploy<sup>EA</sup> 的文档。想要查看 Deploy Classic 文档吗？[在这里查看](/deploy/)。

:::

:::note

Deno Deploy<sup>EA</sup> 处于私人测试阶段。要使用 Deno Deploy<sup>EA</sup>，您必须加入早期访问计划，访问
[Deploy Classic 帐户设置页面](https://dash.deno.com/account#early-access)。

在加入早期访问计划后，您可能仍然没有立即访问 Deno Deploy<sup>EA</sup> 的权限，因为我们正在分阶段推出访问权限。

:::

## 创建组织

要开始使用 Deno Deploy<sup>EA</sup>，您必须首先创建一个 Deno Deploy<sup>EA</sup> 组织。您可以访问
[app.deno.com](http://app.deno.com) 进行此操作。

首次访问仪表板时，您将看到 Deno Deploy<sup>EA</sup> 组织创建屏幕：

![Deno Deploy<sup>EA</sup> 组织创建屏幕。](./images/create_org.png)

当前，您无法创建与 Deploy Classic 中的任何项目名称相同的 slug 的组织。

目前，组织名称和组织 slug 在创建后无法更改。

## 创建应用

创建组织后，您将被重定向到组织应用页面，您可以在此查看应用中的所有组织列表。在这里，您可以导航到组织设置和管理附加到您组织的自定义域的自定义域列表。

要创建应用，请按 `+ New App` 按钮：

![部署应用创建屏幕截图](./images/create_app.png)

应用是一个单一部署的 Web 服务，具有一个构建配置、构建历史、环境变量、附加的自定义域、链接的 GitHub 存储库等。

## 选择存储库

![部署组织选择屏幕截图](./images/select_org.png)

接下来，您需要选择要部署的应用代码的 GitHub 存储库。撰写本文时，您必须从 GitHub 存储库中部署。

如果您的存储库未显示，请使用用户/组织或存储库下拉菜单中的 `Add another GitHub account` 或 `Configure GitHub App permissions` 按钮，授予 Deno Deploy GitHub 应用权限以部署您的存储库。

> ⏳ 我们尚不支持部署 mono-repos（例如，实际应用程序完全位于子目录中的存储库）。

## 配置您的应用

选择 GitHub 存储库后，Deno Deploy<sup>EA</sup> 将自动尝试检测您正在部署的应用类型，并确定适当的构建配置。您可以在右上角的 `App Config` 框中查看检测到的配置。

![部署应用配置屏幕截图](./images/app_config.png)

如果构建配置检测不正确，或者您想要进行更改，请单击 `Edit build config` 按钮以打开构建配置抽屉。

![部署构建配置屏幕截图](./images/build_config.png)

## 配置您的构建

在构建配置抽屉中，您可以编辑框架预设。如果您不使用框架或者正在使用列表中没有的框架，请选择 `No Preset`。

然后，您可以根据所选预设编辑多个选项：

### 安装命令

如果您需要在运行构建命令之前安装依赖项，例如 `npm install`、`deno install` 或类似命令，请在此处输入此命令。如果您正在部署没有 `package.json` 的 Deno 应用程序，通常可以将此项留空。

### 构建命令

执行命令以获取您的源代码并构建/打包/编译应用程序，以便可以部署。这可以是诸如 `next build` 的框架构建命令，或您在 `package.json` 或 `deno.json` 中定义的构建任务，或任何其他 shell 脚本。如果您的应用没有构建命令，例如没有 JavaScript 或 TypeScript 入口点的服务器端 Deno 应用，则可以将此字段留空。

### 运行时配置

对于大多数框架，这里没有配置选项，因为 Deno Deploy<sup>EA</sup> 将根据框架预设自动确定理想的运行时配置。当未使用框架时，您可以在此选择应用是 `Dynamic` 还是 `Static`：

- **Dynamic（动态）**：应用在每个请求时执行服务器端代码（如 API 服务器、服务器端渲染应用等）。
- **Static（静态）**：应用由一组静态文件组成，仅托管静态内容。

### 动态入口点

应该执行以启动应用程序的 JavaScript 或 TypeScript 文件路径。此路径相对于工作目录。

### 动态参数

传递给入口点的额外命令行参数（在入口点之后）。参数会传递给应用程序本身，而不是 Deno。

### 静态目录

包含要提供的静态文件的目录，例如 `dist`、`_site` 或 `.output`。

### 单页应用模式

应用是否为单页应用（SPA），在这种情况下，应在不存在于静态目录中的路径提供根 `index.html`，而非返回 404 页面。

关闭抽屉即保存设置。

### 环境变量

在此页面，您还可以点击 `Add/Edit environment variables` 按钮添加环境变量：

![部署环境变量配置屏幕截图](./images/env_var.png)

在此抽屉中，点击 `+ Add variable` 按钮添加新环境变量。可以为其命名、设定值，并选择该变量是以明文存储（之后可以在控制台查看）还是作为秘密（之后无法在控制台查看值）。

还可选择环境变量在什么上下文中可用，包括：

- **Production（生产）**：通过生产域（如 `<app>.<org>.deno.net` 或自定义域）访问应用时。  
- **Development（开发）**：在预览域或分支域访问时。

环境变量必须添加到至少一个上下文，也可添加到多个甚至全部上下文。

点击“保存”以保存环境变量。你也可以再次打开抽屉进行编辑或删除。

你还可以在此页面编辑应用程序的名称，并选择应用程序应在哪些区域提供。

## 构建和部署您的应用

最后，点击 `Create App` 按钮，即可创建应用并立即触发首次构建：

![应用构建日志屏幕截图](./images/build_logs.png)

在构建页面中，可以看到分多个部分的实时构建日志流：

- **Prepare（准备）**：克隆 GitHub 仓库和恢复构建缓存
- **Install（安装）**：执行安装命令及任何框架相关的预安装步骤
- **Build（构建）**：执行构建命令、框架预设的预构建以及后续设置，为部署准备输出
- **Warm up（预热）**：向部署的预览 URL 发送请求，确保应用正常启动。此处显示的日志是运行时日志，而非构建日志。
- **Route（部署）**：Deno Deploy 正在将新版本推送到全球所有区域

构建界面左上角有一个取消构建按钮；失败时，也可以点击重新启动。

完成后，右上角会显示构建的预览 URL，还会显示该版本部署到的所有时间线（如 `Production` 或 `Git Branch`）。

您还可以在此页面上查看构建的触发方式：  
- `manual action`（手动操作）表示由 UI 触发  
- `GitHub repo` 表示通过 GitHub 集成触发

可以通过预览 URL 或在时间线列表中显示的其他 URL 访问您的应用。

## 监控您的应用程序

访问应用后，您可以看到应用的遥测信息，包括日志和我们可观察性面板中的追踪数据。对应页面请通过左侧边栏访问。

### 日志

![日志页面截图](./images/logs.png)

日志页面显示项目中的所有近期日志。默认显示所有上下文（生产和开发）的日志，但可以用顶部的筛选按钮和搜索栏限制显示内容。例如，输入 `context:production` 仅过滤生产环境的日志。也可以用 `revision:<id>` 过滤特定版本的日志。

支持全文搜索能力，过滤条件只匹配日志中写入的文本（不区分大小写）。

默认显示过去一小时的日志。通过右上角的时间选择器调整时间范围。显示时间戳以时间选择器中设定的时区为准。

日志行右侧的“查看跟踪”按钮在该日志行关联到特定追踪时出现。点击后会以叠加层显示对应追踪的详细信息。

### 跟踪

![跟踪页面截图](./images/traces.png)

跟踪页面展示项目中的所有最近追踪信息。默认显示所有上下文（生产和开发）的追踪，但可以用顶部的筛选和搜索进行限制。例如，添加 `context:production` 仅筛选生产追踪。用 `revision:<id>` 过滤特定版本。

包括所有传入的 HTTP 请求追踪，列表中每个显示请求路径和持续时间（毫秒）。点击某个追踪条即打开详细视图，显示包含的所有跨度和日志。

![跟踪视图截图](./images/trace.png)

每个跨度显示持续时间、名称、开始和结束时间，及记录的属性。点击时间线中的跨度，即可在底部摘要面板中看到具体信息。

对应此跨度的日志信息，显示在底部“日志”标签中。切换不同的跨度，即会更新底部显示的日志内容。