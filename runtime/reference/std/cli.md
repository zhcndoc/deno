---
title: "@std/cli"
description: "ç”¨äºåˆ›å»ºäº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·çš„å·¥å…·"
jsr: jsr:@std/cli
pkg: cli
version: 1.0.26
generated: true
stability: stable
---

<!-- Autogenerated from JSR docs. Do not edit directly. -->

## æ¦‚è¿°

<p>ç”¨äºåˆ›å»ºäº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·çš„å·¥å…·ã€‚</p>

```js
import { parseArgs } from "@std/cli/parse-args";
import { assertEquals } from "@std/assert";

// ä¸è¿è¡Œ `deno run example.ts --foo --bar=baz ./quux.txt` ç›¸åŒ
const args = parseArgs(["--foo", "--bar=baz", "./quux.txt"]);
assertEquals(args, { foo: true, bar: "baz", _: ["./quux.txt"] });
```

### æ·»åŠ åˆ°ä½ çš„é¡¹ç›®

```sh
deno add jsr:@std/cli
```

<a href="https://jsr.io/@std/cli/doc" class="docs-cta jsr-cta">æŸ¥çœ‹ @std/cli ä¸­çš„æ‰€æœ‰ç¬¦å·
<svg class="inline ml-1" viewBox="0 0 13 7" aria-hidden="true" height="20"><path d="M0,2h2v-2h7v1h4v4h-2v2h-7v-1h-4" fill="#083344"></path><g fill="#f7df1e"><path d="M1,3h1v1h1v-3h1v4h-3"></path><path d="M5,1h3v1h-2v1h2v3h-3v-1h2v-1h-2"></path><path d="M9,2h3v2h-1v-1h-1v3h-1"></path></g></svg></a>

<!-- custom:start -->

## ä¸ºä»€ä¹ˆä½¿ç”¨ @std/cliï¼Ÿ

æ­¤åŒ…å¸®åŠ©ä½ æ„å»ºå…·æœ‰æä½³å¼€å‘è€…ä½“éªŒçš„å‘½ä»¤è¡Œå·¥å…·ã€‚
å®ƒä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½ï¼š

- è§£ææ ‡å¿—å’Œå‚æ•°ï¼ˆ`parseArgs`ï¼‰ï¼Œæ— éœ€ä½¿ç”¨åºå¤§çš„æ¡†æ¶
- æç¤ºè¾“å…¥æ•æ„Ÿä¿¡æ¯ï¼ˆ`promptSecret`ï¼‰
- å¯é æµ‹é‡æ˜¾ç¤ºå®½åº¦ï¼ˆ`unicodeWidth`ï¼‰ï¼Œä»¥å®ç°æ•´æ´çš„ç»ˆç«¯è¾“å‡º
- ä¸ç¨³å®šçš„å¢å¼ºåŠŸèƒ½ä»¥æ”¹å–„ç”¨æˆ·ä½“éªŒï¼šåŠ è½½åŠ¨ç”»ã€è¿›åº¦æ¡ã€ANSI å…‰æ ‡æ§åˆ¶
  ä»¥åŠäº¤äº’å¼é€‰æ‹©èœå•

å½“ä½ æƒ³è¦ä¸€ä¸ªè½»é‡ä¸”å¯ç»„åˆçš„å‘½ä»¤è¡Œå·¥å…·åŒ…æ—¶ä½¿ç”¨å®ƒã€‚
å¯¹äºåŒ…å«å­å‘½ä»¤ã€ä¸°å¯Œå¸®åŠ©å’Œé…ç½®ç³»ç»Ÿçš„æ›´å¤æ‚å‘½ä»¤è¡Œå·¥å…·ï¼Œ
ä½ ä»ç„¶å¯ä»¥ä» `parseArgs` å¼€å§‹ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºè‡ªå·±çš„ç»“æ„ã€‚

## ç¤ºä¾‹

```ts
import { parseArgs } from "@std/cli/parse-args";
import { promptSecret } from "@std/cli/prompt-secret";

const args = parseArgs(Deno.args, {
  alias: { v: "verbose" },
  boolean: ["verbose"],
  string: ["out"],
});

if (args.verbose) console.log("å¯ç”¨è¯¦ç»†æ¨¡å¼");
const token = await promptSecret("è¯·è¾“å…¥ API ä»¤ç‰Œï¼š");
console.log(`å†™å…¥åˆ°ï¼š${args.out ?? "æ ‡å‡†è¾“å‡º"}`);
```

- `parseArgs` è½»é‡ä¸”æ— ç‰¹å®šè®¾è®¡çº¦æŸâ€”â€”éå¸¸é€‚åˆç®€å•å·¥å…·ï¼›
  å¯¹äºå¤æ‚çš„å‘½ä»¤è¡Œè¯·è€ƒè™‘å­å‘½ä»¤å’Œå¸®åŠ©æ–‡æœ¬æ¨¡å¼ã€‚
- å¸ƒå°”å€¼é»˜è®¤ä¸º falseï¼Œé™¤éå­˜åœ¨å¯¹åº”æ ‡å¿—ï¼›å¦‚æœéœ€è¦ï¼Œå¯ä»¥é€šè¿‡ `booleanNegation` é€‰é¡¹æ”¯æŒ `--no-flag`ã€‚
- ä½¿ç”¨ `stopEarly` å°† `--` è§†ä¸ºå‚æ•°ç»“æŸæ ‡å¿—ï¼Œå¹¶å°†å‰©ä½™å‚æ•°ç›´æ¥ä¼ é€’ã€‚

### parseArgsï¼šåˆ«åã€é»˜è®¤å€¼ã€æ”¶é›†ã€å¤šé€‰ã€å¦å®šã€æœªçŸ¥æ ‡å¿—å’Œ --

```ts
import { parseArgs } from "@std/cli/parse-args";

const argv = [
  "-v",
  "--out=dist/file.txt",
  "--tag",
  "alpha",
  "--tag",
  "beta",
  "--no-cache",
  "--",
  "--literally-a-file-flag",
];

const args = parseArgs(argv, {
  alias: { v: "verbose" },
  boolean: ["verbose", "cache"],
  string: ["out"],
  default: { out: "stdout" },
  collect: ["tag"],
  negatable: ["cache"],
  unknown: (flag) => {
    if (flag.startsWith("--") && flag !== "--") {
      console.warn(`æœªçŸ¥æ ‡å¿—: ${flag}`);
      return false; // ä»è§£æç»“æœä¸­ä¸¢å¼ƒå®ƒ
    }
    return true;
  },
  "--": true,
});

// args.tag -> ["alpha", "beta"]
// args.cache -> false (å› ä¸ºæœ‰ --no-cache)
// args.verbose -> true (å› ä¸ºæœ‰ -v)
// args.out -> "dist/file.txt"
// args["--"] -> ["--literally-a-file-flag"] ï¼ˆç›´æ¥ä¼ é€’çš„å‚æ•°ï¼‰
```

### promptSecretï¼šæ©ç è¾“å…¥ä¸æ¸…é™¤æç¤ºè¡Œ

```ts
import { promptSecret } from "@std/cli/prompt-secret";

const token = await promptSecret("è¯·è¾“å…¥ä»¤ç‰Œï¼š", { mask: "*" });
// å¯é€‰ï¼šè¾“å…¥å®Œæˆåæ¸…é™¤æç¤ºè¡Œ
await promptSecret("æŒ‰å›è½¦ç»§ç»­", { mask: "", clear: true });
```

### unicodeWidthï¼šç®€å•çš„åˆ—å¯¹é½

```ts
import { unicodeWidth } from "@std/cli/unicode-width";

const rows = [
  ["åç§°", "å®½åº¦"],
  ["hello", String(unicodeWidth("hello"))],
  ["ä½ å¥½", String(unicodeWidth("ä½ å¥½"))],
  ["ğŸ™octo", String(unicodeWidth("ğŸ™octo"))],
];

const col1Width = Math.max(...rows.map((r) => unicodeWidth(r[0])));
for (const [a, b] of rows) {
  const pad = " ".repeat(col1Width - unicodeWidth(a));
  console.log(`${a}${pad}  ${b}`);
}
```

### ä¸ç¨³å®šçš„ UI è¾…åŠ©ï¼šåŠ è½½åŠ¨ç”»å’Œè¿›åº¦æ¡

è¿™äº› API æ ‡è®°ä¸ºä¸ç¨³å®šï¼Œå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚

```ts
// åŠ è½½åŠ¨ç”»
import { Spinner } from "@std/cli/unstable-spinner";

const spinner = new Spinner({ message: "è·å–æ•°æ®ä¸­..." });
spinner.start();
await new Promise((r) => setTimeout(r, 800));
spinner.stop();

// è¿›åº¦æ¡
import { ProgressBar } from "@std/cli/unstable-progress-bar";

const bar = new ProgressBar({ max: 5 });
for (let i = 0; i < 5; i++) {
  await new Promise((r) => setTimeout(r, 300));
  bar.value = i + 1;
}
bar.stop();
```

<!-- custom:end -->
