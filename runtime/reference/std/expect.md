---
title: "@std/expect"
description: "兼容 Jest 的 `expect` 断言函数"
jsr: jsr:@std/expect
pkg: expect
version: 1.0.17
generated: true
stability: stable
---

<!-- Autogenerated from JSR docs. Do not edit directly. -->

## 概述

<p>该模块提供兼容 Jest 的 expect 断言功能。</p>

```js
import { expect } from "@std/expect";

const x = 6 * 7;
expect(x).toEqual(42);
expect(x).not.toEqual(0);

await expect(Promise.resolve(x)).resolves.toEqual(42);
```

<p>当前该模块支持以下函数：</p>
<ul>
<li>常用匹配器:
<ul>
<li><code>toBe</code></li>
<li><code>toEqual</code></li>
<li><code>toStrictEqual</code></li>
<li><code>toMatch</code></li>
<li><code>toMatchObject</code></li>
<li><code>toBeDefined</code></li>
<li><code>toBeUndefined</code></li>
<li><code>toBeNull</code></li>
<li><code>toBeNaN</code></li>
<li><code>toBeTruthy</code></li>
<li><code>toBeFalsy</code></li>
<li><code>toContain</code></li>
<li><code>toContainEqual</code></li>
<li><code>toHaveLength</code></li>
<li><code>toBeGreaterThan</code></li>
<li><code>toBeGreaterThanOrEqual</code></li>
<li><code>toBeLessThan</code></li>
<li><code>toBeLessThanOrEqual</code></li>
<li><code>toBeCloseTo</code></li>
<li><code>toBeInstanceOf</code></li>
<li><code>toThrow</code></li>
<li><code>toHaveProperty</code></li>
</ul>
</li>
<li>模拟相关匹配器:
<ul>
<li><code>toHaveBeenCalled</code></li>
<li><code>toHaveBeenCalledTimes</code></li>
<li><code>toHaveBeenCalledWith</code></li>
<li><code>toHaveBeenLastCalledWith</code></li>
<li><code>toHaveBeenNthCalledWith</code></li>
<li><code>toHaveReturned</code></li>
<li><code>toHaveReturnedTimes</code></li>
<li><code>toHaveReturnedWith</code></li>
<li><code>toHaveLastReturnedWith</code></li>
<li><code>toHaveNthReturnedWith</code></li>
</ul>
</li>
<li>非对称匹配器:
<ul>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.anything" rel="nofollow"><code>expect.anything</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.any" rel="nofollow"><code>expect.any</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.arrayContaining" rel="nofollow"><code>expect.arrayContaining</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.not.arrayContaining" rel="nofollow"><code>expect.not.arrayContaining</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.objectContaining" rel="nofollow"><code>expect.objectContaining</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.not.objectContaining" rel="nofollow"><code>expect.not.objectContaining</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.closeTo" rel="nofollow"><code>expect.closeTo</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.stringContaining" rel="nofollow"><code>expect.stringContaining</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.not.stringContaining" rel="nofollow"><code>expect.not.stringContaining</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.stringMatching" rel="nofollow"><code>expect.stringMatching</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.not.stringMatching" rel="nofollow"><code>expect.not.stringMatching</code></a></li>
</ul>
</li>
<li>工具:
<ul>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.addSnapshotSerializer" rel="nofollow"><code>expect.addSnapshotSerializer</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.assertions" rel="nofollow"><code>expect.assertions</code></a></li>
<li><code>expect.addEqualityTester</code></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.extend" rel="nofollow"><code>expect.extend</code></a></li>
<li><a href="https://jsr.io/@std/expect@1.0.17/doc/~/expect.hasAssertions" rel="nofollow"><code>expect.hasAssertions</code></a></li>
</ul>
</li>
</ul>
<p>以下函数仍不可用：</p>
<ul>
<li>匹配器:
<ul>
<li><code>toMatchSnapshot</code></li>
<li><code>toMatchInlineSnapshot</code></li>
<li><code>toThrowErrorMatchingSnapshot</code></li>
<li><code>toThrowErrorMatchingInlineSnapshot</code></li>
</ul>
</li>
</ul>
<p>添加对不支持 API 部分支持的跟踪问题：
<a href="https://github.com/denoland/std/issues/3964" rel="nofollow">https://github.com/denoland/std/issues/3964</a>。</p>
<p>该模块很大程度上借鉴了
<a href="https://github.com/allain/expect" rel="nofollow">x/expect</a> 模块，由
<a href="https://github.com/allain" rel="nofollow">Allain Lalonde</a> 编写。</p>

### 添加到您的项目

```sh
deno add jsr:@std/expect
```

<a href="https://jsr.io/@std/expect/doc" class="docs-cta jsr-cta">查看 @std/expect 中的所有
符号
<svg class="inline ml-1" viewBox="0 0 13 7" aria-hidden="true" height="20"><path d="M0,2h2v-2h7v1h4v4h-2v2h-7v-1h-4" fill="#083344"></path><g fill="#f7df1e"><path d="M1,3h1v1h1v-3h1v4h-3"></path><path d="M5,1h3v1h-2v1h2v3h-3v-1h2v-1h-2"></path><path d="M9,2h3v2h-1v-1h-1v3h-1"></path></g></svg></a>

<!-- custom:start -->

## 什么是 expect？

一个兼容 Jest 的流式断言 API。与独立的断言函数不同，
您可以编写像 `expect(value).toBe(1)` 这样的预期，并能链式调用修饰符，如
`.not`、`.resolves` 和 `.rejects`。

## 何时使用 @std/expect

如果您喜欢类似 Jest 的 API，具有流畅、易读的断言和丰富的匹配器，
尤其是在从 Jest 迁移时。

## 示例

```ts
import { expect } from "@std/expect";

expect({ a: 1, b: 2 }).toMatchObject({ a: 1 });
await expect(Promise.resolve(42)).resolves.toBe(42);
expect([1, 2, 3]).toContain(2);

// 抛出异常和异步拒绝
expect(() => JSON.parse("{"))
  .toThrow(SyntaxError);
await expect(Promise.reject(new Error("boom")))
  .rejects.toThrow("boom");

// 浮点近似，正则匹配
expect(0.1 + 0.2).toBeCloseTo(0.3, 15);
expect("hello world").toMatch(/world/);

// 使用非对称匹配器
expect({ id: 1, name: "Ada" })
  .toEqual(expect.objectContaining({ name: expect.stringMatching(/^A/) }));
```

## 与 Deno.test 一起使用

```ts
import { expect } from "@std/expect";
Deno.test("基本 expect 测试", () => {
  const value = 2 + 2;
  expect(value).toBe(4);
});
```

更多关于 Deno 中测试的信息，请参见
[测试文档](/runtime/fundamentals/testing/)。

## 小贴士

- 使用 `toEqual` 进行深度数据比较，使用 `toBe` 进行身份比较。
- 优先使用 `.resolves` / `.rejects` 来处理 Promise。
- 优先使用 `.resolves` / `.rejects` 来处理 Promise。
- 使用 `toStrictEqual` 进行更严格的深度检查（无额外属性等）。
- 需要时通过 `expect.extend` 扩展自定义匹配器。

<!-- custom:end -->
