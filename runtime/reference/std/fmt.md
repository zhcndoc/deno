---
title: "@std/fmt"
description: "用于格式化值的工具，例如为文本添加颜色、格式化持续时间、printf 工具、格式化字节数。"
jsr: jsr:@std/fmt
pkg: fmt
version: 1.0.9
generated: true
stability: stable
---

<!-- Autogenerated from JSR docs. Do not edit directly. -->

## 概述

<p>提供用于格式化不同类型文本的实用工具：</p>
<ul>
<li><a href="https://jsr.io/@std/fmt/doc/bytes/~" rel="nofollow">人类可读的字节数</a></li>
<li><a href="https://jsr.io/@std/fmt/doc/colors/~" rel="nofollow">命令行界面样式</a></li>
<li><a href="https://jsr.io/@std/fmt/doc/duration/~" rel="nofollow">时间持续量</a></li>
<li><a href="https://jsr.io/@std/fmt/doc/printf/~" rel="nofollow">将格式化字符串打印到标准输出</a></li>
</ul>

```js
import { format } from "@std/fmt/bytes";
import { red } from "@std/fmt/colors";

console.log(red(format(1337))); // 输出 "1.34 kB"
```

<h1 id="runtime-compatibility">
运行时兼容性</h1>
<p><a href="https://jsr.io/@std/fmt/doc/bytes/~" rel="nofollow">bytes</a>，
<a href="https://jsr.io/@std/fmt/doc/colors/~" rel="nofollow">colors</a> 和
<a href="https://jsr.io/@std/fmt/doc/duration/~" rel="nofollow">duration</a> 支持所有主要运行时。
<a href="https://jsr.io/@std/fmt/doc/printf/~" rel="nofollow">printf</a> 大致兼容主流运行时，
不过某些特性，比如 <code>%v</code>、<code>%i</code> 和 <code>%I</code> 格式说明符，
仅在 Deno 中可用。详细内容请参见 API 文档。</p>

### 添加到项目中

```sh
deno add jsr:@std/fmt
```

<a href="https://jsr.io/@std/fmt/doc" class="docs-cta jsr-cta">查看 @std/fmt 中的所有符号
<svg class="inline ml-1" viewBox="0 0 13 7" aria-hidden="true" height="20"><path d="M0,2h2v-2h7v1h4v4h-2v2h-7v-1h-4" fill="#083344"></path><g fill="#f7df1e"><path d="M1,3h1v1h1v-3h1v4h-3"></path><path d="M5,1h3v1h-2v1h2v3h-3v-1h2v-1h-2"></path><path d="M9,2h3v2h-1v-1h-1v3h-1"></path></g></svg></a>

<!-- custom:start -->

## 什么是格式化？

格式化是将数据转换为特定布局或样式以供展示的过程。它可以包括添加颜色、调整间距，或者将值转换为人类可读的形式。

## 何时使用 @std/fmt

如果你需要以用户友好的方式展示数据，尤其是在命令行应用中。

## 示例

```ts
// 字节数：十进制（kB）与二进制（KiB），带符号值与本地化
import { format as formatBytes } from "@std/fmt/bytes";

formatBytes(1337); // "1.34 kB"
formatBytes(1536, { binary: true }); // "1.50 KiB"
formatBytes(-4096, { signed: true }); // "-4.10 kB"
formatBytes(12_345_678, { locale: "de-DE" }); // 例如 "12,35 MB"
```

```ts
// 持续时间：紧凑显示，可选零值忽略
import { format as formatDuration } from "@std/fmt/duration";

formatDuration(90_000); // 例如 "1m 30s"（具体样式可能有所不同）
formatDuration(3_600_000, { ignoreZero: true }); // 例如 "1h"
```

```ts
// printf/sprintf：Go 风格格式化
import { printf, sprintf } from "@std/fmt/printf";

printf("%-10s %08d 0x%X\n", "build#", 42, 3735928559);
const line = sprintf("%6.2f%% %s", 12.3456, "complete");
// 注意：某些说明符如 %v/%i/%I 仅限于 Deno。
```

```ts
// 颜色：组合样式；切换及移除 ANSI 代码
import {
  bold,
  getColorEnabled,
  green,
  red,
  setColorEnabled,
  stripAnsiCode,
} from "@std/fmt/colors";

setColorEnabled(true);
const ok = bold(green("OK"));
const err = bold(red("ERROR"));
console.log(ok, err);

// 写入日志时移除 ANSI 码
const plain = stripAnsiCode(ok);
```

## 小贴士

- 使用 bytes 选项（`binary`、`bits`、`locale`、`minimumFractionDigits`、`maximumFractionDigits`、`signed`）以符合你的用户体验需求。
- 命令行界面优先简洁的持续时间输出；用 `ignoreZero` 抑制零值。
- 为了可访问性谨慎使用颜色；写入文件或不支持的系统时移除 ANSI 码。
- 需要精确宽度、填充或数字进制时，选择 printf/sprintf。

<!-- custom:end -->